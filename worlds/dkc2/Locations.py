import typing

from BaseClasses import Location
from .Names import LocationName

from typing import TYPE_CHECKING
if TYPE_CHECKING:
    from . import DKC2World

class DKC2Location(Location):
    game = "Donkey Kong Country 2"

    def __init__(self, player: int, name: str = '', address: int = None, parent=None):
        super().__init__(player, name, address, parent)

STARTING_ID = 0xBF0000

stage_clears = {
    LocationName.pirate_panic_clear:        STARTING_ID + 0x0000,
    LocationName.mainbrace_mayhem_clear:    STARTING_ID + 0x0001,
    LocationName.gangplank_galley_clear:    STARTING_ID + 0x0002,
    LocationName.lockjaws_locker_clear:     STARTING_ID + 0x0003,
    LocationName.topsail_trouble_clear:     STARTING_ID + 0x0004,
    LocationName.krows_nest_clear:          STARTING_ID + 0x0005,
    LocationName.hot_head_hop_clear:        STARTING_ID + 0x0006,
    LocationName.kannons_klaim_clear:       STARTING_ID + 0x0007,
    LocationName.lava_lagoon_clear:         STARTING_ID + 0x0008,
    LocationName.red_hot_ride_clear:        STARTING_ID + 0x0009,
    LocationName.squawks_shaft_clear:       STARTING_ID + 0x000A,
    LocationName.kleevers_kiln_clear:       STARTING_ID + 0x000B,
    LocationName.barrel_bayou_clear:        STARTING_ID + 0x000C,
    LocationName.glimmers_galleon_clear:    STARTING_ID + 0x000D,
    LocationName.krockhead_klamber_clear:   STARTING_ID + 0x000E,
    LocationName.rattle_battle_clear:       STARTING_ID + 0x000F,
    LocationName.slime_climb_clear:         STARTING_ID + 0x0010,
    LocationName.bramble_blast_clear:       STARTING_ID + 0x0011,
    LocationName.kudgels_kontest_clear:     STARTING_ID + 0x0012,
    LocationName.hornet_hole_clear:         STARTING_ID + 0x0013,
    LocationName.target_terror_clear:       STARTING_ID + 0x0014,
    LocationName.bramble_scramble_clear:    STARTING_ID + 0x0015,
    LocationName.rickety_race_clear:        STARTING_ID + 0x0016,
    LocationName.mudhole_marsh_clear:       STARTING_ID + 0x0017,
    LocationName.rambi_rumble_clear:        STARTING_ID + 0x0018,
    LocationName.king_zing_sting_clear:     STARTING_ID + 0x0019,
    LocationName.ghostly_grove_clear:       STARTING_ID + 0x001A,
    LocationName.haunted_hall_clear:        STARTING_ID + 0x001B,
    LocationName.gusty_glade_clear:         STARTING_ID + 0x001C,
    LocationName.parrot_chute_panic_clear:  STARTING_ID + 0x001D,
    LocationName.web_woods_clear:           STARTING_ID + 0x001F,
    LocationName.kreepy_krow_clear:         STARTING_ID + 0x0020,
    LocationName.arctic_abyss_clear:        STARTING_ID + 0x0021,
    LocationName.windy_well_clear:          STARTING_ID + 0x0022,
    LocationName.castle_crush_clear:        STARTING_ID + 0x0023,
    LocationName.clappers_cavern_clear:     STARTING_ID + 0x0024,
    LocationName.chain_link_chamber_clear:  STARTING_ID + 0x0025,
    LocationName.toxic_tower_clear:         STARTING_ID + 0x0026,
    LocationName.stronghold_showdown_clear: STARTING_ID + 0x0027,
    LocationName.screechs_sprint_clear:     STARTING_ID + 0x0028,
    #LocationName.k_rool_duel_clear:         STARTING_ID + 0x0029,
    LocationName.jungle_jinx_clear:         STARTING_ID + 0x002A,
    LocationName.black_ice_battle_clear:    STARTING_ID + 0x002B,
    LocationName.klobber_karnage_clear:     STARTING_ID + 0x002C,
    LocationName.fiery_furnace_clear:       STARTING_ID + 0x002D,
    LocationName.animal_antics_clear:       STARTING_ID + 0x002E,
    #LocationName.krocodile_core_clear:      STARTING_ID + 0x002F,
    LocationName.krow_defeated:             STARTING_ID + 0x0030,
    LocationName.kleever_defeated:          STARTING_ID + 0x0031,
    LocationName.kudgel_defeated:           STARTING_ID + 0x0032,
    LocationName.king_zing_defeated:        STARTING_ID + 0x0033,
    LocationName.kreepy_krow_defeated:      STARTING_ID + 0x0034,
}

stage_kong = {
    LocationName.pirate_panic_kong:        STARTING_ID + 0x0040,
    LocationName.mainbrace_mayhem_kong:    STARTING_ID + 0x0041,
    LocationName.gangplank_galley_kong:    STARTING_ID + 0x0042,
    LocationName.lockjaws_locker_kong:     STARTING_ID + 0x0043,
    LocationName.topsail_trouble_kong:     STARTING_ID + 0x0044,
    LocationName.hot_head_hop_kong:        STARTING_ID + 0x0045,
    LocationName.kannons_klaim_kong:       STARTING_ID + 0x0046,
    LocationName.lava_lagoon_kong:         STARTING_ID + 0x0047,
    LocationName.red_hot_ride_kong:        STARTING_ID + 0x0048,
    LocationName.squawks_shaft_kong:       STARTING_ID + 0x0049,
    LocationName.barrel_bayou_kong:        STARTING_ID + 0x004A,
    LocationName.glimmers_galleon_kong:    STARTING_ID + 0x004B,
    LocationName.krockhead_klamber_kong:   STARTING_ID + 0x004C,
    LocationName.rattle_battle_kong:       STARTING_ID + 0x004D,
    LocationName.slime_climb_kong:         STARTING_ID + 0x004E,
    LocationName.bramble_blast_kong:       STARTING_ID + 0x004F,
    LocationName.hornet_hole_kong:         STARTING_ID + 0x0050,
    LocationName.target_terror_kong:       STARTING_ID + 0x0051,
    LocationName.bramble_scramble_kong:    STARTING_ID + 0x0052,
    LocationName.rickety_race_kong:        STARTING_ID + 0x0053,
    LocationName.mudhole_marsh_kong:       STARTING_ID + 0x0054,
    LocationName.rambi_rumble_kong:        STARTING_ID + 0x0055,
    LocationName.ghostly_grove_kong:       STARTING_ID + 0x0056,
    LocationName.haunted_hall_kong:        STARTING_ID + 0x0057,
    LocationName.gusty_glade_kong:         STARTING_ID + 0x0058,
    LocationName.parrot_chute_panic_kong:  STARTING_ID + 0x0059,
    LocationName.web_woods_kong:           STARTING_ID + 0x005A,
    LocationName.arctic_abyss_kong:        STARTING_ID + 0x005B,
    LocationName.windy_well_kong:          STARTING_ID + 0x005C,
    LocationName.castle_crush_kong:        STARTING_ID + 0x005D,
    LocationName.clappers_cavern_kong:     STARTING_ID + 0x005E,
    LocationName.chain_link_chamber_kong:  STARTING_ID + 0x005F,
    LocationName.toxic_tower_kong:         STARTING_ID + 0x0060,
    LocationName.screechs_sprint_kong:     STARTING_ID + 0x0061,
    LocationName.jungle_jinx_kong:         STARTING_ID + 0x0062,
    LocationName.black_ice_battle_kong:    STARTING_ID + 0x0063,
    LocationName.klobber_karnage_kong:     STARTING_ID + 0x0064,
    LocationName.fiery_furnace_kong:       STARTING_ID + 0x0065,
    LocationName.animal_antics_kong:       STARTING_ID + 0x0066,
}

stage_dk_coin = {
    LocationName.pirate_panic_dk_coin:        STARTING_ID + 0x0080,
    LocationName.mainbrace_mayhem_dk_coin:    STARTING_ID + 0x0081,
    LocationName.gangplank_galley_dk_coin:    STARTING_ID + 0x0082,
    LocationName.lockjaws_locker_dk_coin:     STARTING_ID + 0x0083,
    LocationName.topsail_trouble_dk_coin:     STARTING_ID + 0x0084,
    LocationName.hot_head_hop_dk_coin:        STARTING_ID + 0x0085,
    LocationName.kannons_klaim_dk_coin:       STARTING_ID + 0x0086,
    LocationName.lava_lagoon_dk_coin:         STARTING_ID + 0x0087,
    LocationName.red_hot_ride_dk_coin:        STARTING_ID + 0x0088,
    LocationName.squawks_shaft_dk_coin:       STARTING_ID + 0x0089,
    LocationName.barrel_bayou_dk_coin:        STARTING_ID + 0x008A,
    LocationName.glimmers_galleon_dk_coin:    STARTING_ID + 0x008B,
    LocationName.krockhead_klamber_dk_coin:   STARTING_ID + 0x008C,
    LocationName.rattle_battle_dk_coin:       STARTING_ID + 0x008D,
    LocationName.slime_climb_dk_coin:         STARTING_ID + 0x008E,
    LocationName.bramble_blast_dk_coin:       STARTING_ID + 0x008F,
    LocationName.hornet_hole_dk_coin:         STARTING_ID + 0x0090,
    LocationName.target_terror_dk_coin:       STARTING_ID + 0x0091,
    LocationName.bramble_scramble_dk_coin:    STARTING_ID + 0x0092,
    LocationName.rickety_race_dk_coin:        STARTING_ID + 0x0093,
    LocationName.mudhole_marsh_dk_coin:       STARTING_ID + 0x0094,
    LocationName.rambi_rumble_dk_coin:        STARTING_ID + 0x0095,
    LocationName.ghostly_grove_dk_coin:       STARTING_ID + 0x0096,
    LocationName.haunted_hall_dk_coin:        STARTING_ID + 0x0097,
    LocationName.gusty_glade_dk_coin:         STARTING_ID + 0x0098,
    LocationName.parrot_chute_panic_dk_coin:  STARTING_ID + 0x0099,
    LocationName.web_woods_dk_coin:           STARTING_ID + 0x009A,
    LocationName.arctic_abyss_dk_coin:        STARTING_ID + 0x009B,
    LocationName.windy_well_dk_coin:          STARTING_ID + 0x009C,
    LocationName.castle_crush_dk_coin:        STARTING_ID + 0x009D,
    LocationName.clappers_cavern_dk_coin:     STARTING_ID + 0x009E,
    LocationName.chain_link_chamber_dk_coin:  STARTING_ID + 0x009F,
    LocationName.toxic_tower_dk_coin:         STARTING_ID + 0x00A0,
    LocationName.screechs_sprint_dk_coin:     STARTING_ID + 0x00A1,
    LocationName.jungle_jinx_dk_coin:         STARTING_ID + 0x00A2,
    LocationName.black_ice_battle_dk_coin:    STARTING_ID + 0x00A3,
    LocationName.klobber_karnage_dk_coin:     STARTING_ID + 0x00A4,
    LocationName.fiery_furnace_dk_coin:       STARTING_ID + 0x00A5,
    LocationName.animal_antics_dk_coin:       STARTING_ID + 0x00A6,
}

stage_bonus = {
    LocationName.pirate_panic_bonus_1:        STARTING_ID + 0x00C0,
    LocationName.pirate_panic_bonus_2:        STARTING_ID + 0x00C1,
    LocationName.mainbrace_mayhem_bonus_1:    STARTING_ID + 0x00C2,
    LocationName.mainbrace_mayhem_bonus_2:    STARTING_ID + 0x00C3,
    LocationName.mainbrace_mayhem_bonus_3:    STARTING_ID + 0x00C4,
    LocationName.gangplank_galley_bonus_1:    STARTING_ID + 0x00C5,
    LocationName.gangplank_galley_bonus_2:    STARTING_ID + 0x00C6,
    LocationName.lockjaws_locker_bonus_1:     STARTING_ID + 0x00C7,
    LocationName.topsail_trouble_bonus_1:     STARTING_ID + 0x00C8,
    LocationName.topsail_trouble_bonus_2:     STARTING_ID + 0x00C9,
    LocationName.hot_head_hop_bonus_1:        STARTING_ID + 0x00CA,
    LocationName.hot_head_hop_bonus_2:        STARTING_ID + 0x00CB,
    LocationName.hot_head_hop_bonus_3:        STARTING_ID + 0x00CC,
    LocationName.kannons_klaim_bonus_1:       STARTING_ID + 0x00CD,
    LocationName.kannons_klaim_bonus_2:       STARTING_ID + 0x00CE,
    LocationName.kannons_klaim_bonus_3:       STARTING_ID + 0x00CF,
    LocationName.lava_lagoon_bonus_1:         STARTING_ID + 0x00D0,
    LocationName.red_hot_ride_bonus_1:        STARTING_ID + 0x00D1,
    LocationName.red_hot_ride_bonus_2:        STARTING_ID + 0x00D2,
    LocationName.squawks_shaft_bonus_1:       STARTING_ID + 0x00D3,
    LocationName.squawks_shaft_bonus_2:       STARTING_ID + 0x00D4,
    LocationName.squawks_shaft_bonus_3:       STARTING_ID + 0x00D5,
    LocationName.barrel_bayou_bonus_1:        STARTING_ID + 0x00D6,
    LocationName.barrel_bayou_bonus_2:        STARTING_ID + 0x00D7,
    LocationName.glimmers_galleon_bonus_1:    STARTING_ID + 0x00D8,
    LocationName.glimmers_galleon_bonus_2:    STARTING_ID + 0x00D9,
    LocationName.krockhead_klamber_bonus_1:   STARTING_ID + 0x00DA,
    LocationName.rattle_battle_bonus_1:       STARTING_ID + 0x00DB,
    LocationName.rattle_battle_bonus_2:       STARTING_ID + 0x00DC,
    LocationName.rattle_battle_bonus_3:       STARTING_ID + 0x00DD,
    LocationName.slime_climb_bonus_1:         STARTING_ID + 0x00DE,
    LocationName.slime_climb_bonus_2:         STARTING_ID + 0x00DF,
    LocationName.bramble_blast_bonus_1:       STARTING_ID + 0x00E0,
    LocationName.bramble_blast_bonus_2:       STARTING_ID + 0x00E1,
    LocationName.hornet_hole_bonus_1:         STARTING_ID + 0x00E2,
    LocationName.hornet_hole_bonus_2:         STARTING_ID + 0x00E3,
    LocationName.hornet_hole_bonus_3:         STARTING_ID + 0x00E4,
    LocationName.target_terror_bonus_1:       STARTING_ID + 0x00E5,
    LocationName.target_terror_bonus_2:       STARTING_ID + 0x00E6,
    LocationName.bramble_scramble_bonus_1:    STARTING_ID + 0x00E7,
    LocationName.rickety_race_bonus_1:        STARTING_ID + 0x00E8,
    LocationName.mudhole_marsh_bonus_1:       STARTING_ID + 0x00E9,
    LocationName.mudhole_marsh_bonus_2:       STARTING_ID + 0x00EA,
    LocationName.rambi_rumble_bonus_1:        STARTING_ID + 0x00EB,
    LocationName.rambi_rumble_bonus_2:        STARTING_ID + 0x00EC,
    LocationName.ghostly_grove_bonus_1:       STARTING_ID + 0x00ED,
    LocationName.ghostly_grove_bonus_2:       STARTING_ID + 0x00EE,
    LocationName.haunted_hall_bonus_1:        STARTING_ID + 0x00EF,
    LocationName.haunted_hall_bonus_2:        STARTING_ID + 0x00F0,
    LocationName.haunted_hall_bonus_3:        STARTING_ID + 0x00F1,
    LocationName.gusty_glade_bonus_1:         STARTING_ID + 0x00F2,
    LocationName.gusty_glade_bonus_2:         STARTING_ID + 0x00F3,
    LocationName.parrot_chute_panic_bonus_1:  STARTING_ID + 0x00F4,
    LocationName.parrot_chute_panic_bonus_2:  STARTING_ID + 0x00F5,
    LocationName.web_woods_bonus_1:           STARTING_ID + 0x00F6,
    LocationName.web_woods_bonus_2:           STARTING_ID + 0x00F7,
    LocationName.arctic_abyss_bonus_1:        STARTING_ID + 0x00F8,
    LocationName.arctic_abyss_bonus_2:        STARTING_ID + 0x00F9,
    LocationName.windy_well_bonus_1:          STARTING_ID + 0x00FA,
    LocationName.windy_well_bonus_2:          STARTING_ID + 0x00FB,
    LocationName.castle_crush_bonus_1:        STARTING_ID + 0x00FC,
    LocationName.castle_crush_bonus_2:        STARTING_ID + 0x00FD,
    LocationName.clappers_cavern_bonus_1:     STARTING_ID + 0x00FE,
    LocationName.clappers_cavern_bonus_2:     STARTING_ID + 0x00FF,
    LocationName.chain_link_chamber_bonus_1:  STARTING_ID + 0x0100,
    LocationName.chain_link_chamber_bonus_2:  STARTING_ID + 0x0101,
    LocationName.toxic_tower_bonus_1:         STARTING_ID + 0x0102,
    LocationName.screechs_sprint_bonus_1:     STARTING_ID + 0x0103,
}

swanky_quiz = {
    LocationName.swanky_galleon_game_1:       STARTING_ID + 0x0140,
    LocationName.swanky_galleon_game_2:       STARTING_ID + 0x0141,
    LocationName.swanky_galleon_game_3:       STARTING_ID + 0x0142,
    LocationName.swanky_cauldron_game_1:      STARTING_ID + 0x0143,
    LocationName.swanky_cauldron_game_2:      STARTING_ID + 0x0144,
    LocationName.swanky_cauldron_game_3:      STARTING_ID + 0x0145,
    LocationName.swanky_quay_game_1:          STARTING_ID + 0x0146,
    LocationName.swanky_quay_game_2:          STARTING_ID + 0x0147,
    LocationName.swanky_quay_game_3:          STARTING_ID + 0x0148,
    LocationName.swanky_kremland_game_1:      STARTING_ID + 0x0149,
    LocationName.swanky_kremland_game_2:      STARTING_ID + 0x014A,
    LocationName.swanky_kremland_game_3:      STARTING_ID + 0x014B,
    LocationName.swanky_gulch_game_1:         STARTING_ID + 0x014C,
    LocationName.swanky_gulch_game_2:         STARTING_ID + 0x014D,
    LocationName.swanky_gulch_game_3:         STARTING_ID + 0x014E,
    LocationName.swanky_keep_game_1:          STARTING_ID + 0x014F,
    LocationName.swanky_keep_game_2:          STARTING_ID + 0x0150,
    LocationName.swanky_keep_game_3:          STARTING_ID + 0x0151,
}

all_locations = {
    **stage_clears,
    **stage_dk_coin,
    **stage_kong,
    **stage_bonus,
    **swanky_quiz,
}

location_table = {}

location_groups = {
}
    
def setup_locations(world: "DKC2World"):
    location_table = {
        **stage_clears,
        **stage_bonus,
    }

    if world.options.dk_coin_checks:
        location_table.update(stage_dk_coin)
    if world.options.kong_checks:
        location_table.update(stage_kong)
    if world.options.swanky_checks:
        location_table.update(swanky_quiz)

    return location_table

lookup_id_to_name: typing.Dict[int, str] = {id: name for name, _ in all_locations.items()}
