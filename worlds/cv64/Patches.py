normal_door_hook = [
    0x00, 0x86, 0x20, 0x21,  # ADDU  A0, A0, A2
    0x80, 0x84, 0x9C, 0x60,  # LB    A0, 0x9C60 (A0)
    0x0C, 0x0F, 0xF1, 0x74,  # JAL   0x803FC5D0
    0x30, 0x89, 0x00, 0xFF   # ANDI  T1, A0, 0x00FF
]

normal_door_code = [
    0x00, 0x02, 0x40, 0x80,  # SLL   T0, V0, 2
    0x3C, 0x04, 0x80, 0x39,  # LUI   A0, 0x8039
    0x00, 0x88, 0x20, 0x21,  # ADDU  A0, A0, T0
    0x8C, 0x84, 0x9B, 0xE4,  # LW    A0, 0x9BE4 (A0)
    0x8C, 0x6A, 0x00, 0x08,  # LW    T2, 0x0008 (V1)
    0x00, 0x8A, 0x58, 0x24,  # AND   T3, A0, T2
    0x11, 0x60, 0x00, 0x03,  # BEQZ  T3, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x24, 0x02, 0x00, 0x03,  # ADDIU V0, R0, 0x0003
    0x27, 0xFF, 0x00, 0x6C,  # ADDIU RA, RA, 0x006C
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

ct_door_hook = [
    0x0C, 0x0F, 0xF1, 0x82,  # JAL	 0x803FC608
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x31, 0x59, 0x00, 0xFF   # ANDI  T9, T2, 0x00FF
]

ct_door_code = [
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x8D, 0x42, 0x9B, 0xF8,  # LW    V0, 0x9BF8 (T2)
    0x01, 0x46, 0x50, 0x21,  # ADDU  T2, T2, A2
    0x81, 0x4A, 0x9C, 0x60,  # LB    T2, 0x9C60 (T2)
    0x00, 0x49, 0x58, 0x24,  # AND   T3, V0, T1
    0x55, 0x60, 0x00, 0x01,  # BNEZL T3, [forward 0x01]
    0x27, 0xFF, 0x00, 0x10,  # ADDIU RA, RA, 0x0010
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

stage_select_overwrite = [
    # Replacement for the "wipe world state" function when using the warp menu. Now it's the "Special1 jewel checker"
    # to see how many destinations can be selected on it with the current count.
    0x8F, 0xA6, 0x00, 0x18,  # LW	 A2, 0x0018 (SP)
    0xA0, 0x60, 0x64, 0x37,  # SB	 R0, 0x6437 (V1)
    0x10, 0x00, 0x00, 0x29,  # B	 [forward 0x29]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x3C, 0x0A, 0x80, 0x39,  # LUI	 T2, 0x8039
    0x25, 0x4A, 0x9C, 0x4B,  # ADDIU T2, T2, 0x9C4B
    0x81, 0x4B, 0x00, 0x00,  # LB	 T3, 0x0000 (T2)
    0x24, 0x0C, 0x00, 0x0A,  # ADDIU T4, R0, 0x000A
    0x01, 0x6C, 0x00, 0x1B,  # DIVU	 T3, T4
    0x00, 0x00, 0x30, 0x12,  # MFLO	 A2
    0x24, 0xC6, 0x00, 0x01,  # ADDIU A2, A2, 0x0001
    0x28, 0xCA, 0x00, 0x09,  # SLTI	 T2, A2, 0x0009
    0x51, 0x40, 0x00, 0x01,  # BEQZL T2, 0x8012AC7C
    0x24, 0x06, 0x00, 0x08,  # ADDIU A2, R0, 0x0008
    0x3C, 0x0A, 0x80, 0x0D,  # LUI   T2, 0x800D
    0x91, 0x4A, 0x5E, 0x20,  # LBU   T2, 0x5E20 (T2)
    0x31, 0x4A, 0x00, 0x40,  # ANDI  T2, T2, 0x0040
    0x11, 0x40, 0x00, 0x03,  # BEQZ  T2,     [forward 0x03]
    0x24, 0x0B, 0xFF, 0xFE,  # ADDIU T3, R0, 0xFFFE
    0x3C, 0x0C, 0x80, 0x34,  # LUI   T4, 0x8034
    0xAD, 0x8B, 0x20, 0x84,  # SW    T3, 0x2084 (T4)
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00   # NOP
]

custom_code_loader = [
    # On boot, when the company logos show up, this will trigger and load most of the custom ASM data in this module
    # off from ROM offsets 0xBFC000-0xBFFFFF and into the 803FC000-803FFFFF range in RAM.
    0x3C, 0x08, 0x0C, 0x10,  # LUI   T0, 0x0C10
    0x25, 0x08, 0xF1, 0xC0,  # ADDIU T0, T0, 0xF1C0
    0x3C, 0x09, 0x80, 0x00,  # LUI   T1, 0x8000
    0xAD, 0x28, 0x24, 0x38,  # SW    T0, 0x2438 (T1)
    0x3C, 0x08, 0x80, 0x40,  # LUI   T0, 0x8040
    0x91, 0x08, 0xC0, 0x00,  # ADDIU T0, 0xC000 (T0)
    0x15, 0x00, 0x00, 0x07,  # BNEZ  T0, [forward 0x07]
    0x3C, 0x04, 0x00, 0xC0,  # LUI   A0, 0x00C0
    0x24, 0x84, 0xC0, 0x00,  # ADDIU A0, A0, 0xC000
    0x3C, 0x05, 0x80, 0x40,  # LUI   A1, 0x8040
    0x24, 0xA5, 0xC0, 0x00,  # ADDIU A1, A1, 0xC000
    0x24, 0x06, 0x40, 0x00,  # ADDIU A2, R0, 0x4000
    0x08, 0x00, 0x5D, 0xFB,  # J     0x800177EC
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

remote_item_giver = [
    # The essential multiworld function. Every frame wherein the player is in control and not looking at a text box,
    # this thing will check some bytes in RAM to see if an item or DeathLink has been received and trigger the right
    # functions accordingly to either reward items or kill the player.

    # Primary checks
    0x3C, 0x08, 0x80, 0x34,  # LUI   T0, 0x8034
    0x95, 0x09, 0x24, 0x4A,  # LHU   T1, 0x244A (T0)
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x0A, 0x9E, 0xFB,  # LBU   T2, 0x9EFF (T0)
    0x01, 0x2A, 0x48, 0x21,  # ADDU  T1, T1, T2
    0x91, 0x0A, 0x9E, 0xFF,  # LBU   T2, 0x9EFF (T0)
    0x01, 0x2A, 0x48, 0x21,  # ADDU  T1, T1, T2
    0x91, 0x0A, 0x9C, 0xCF,  # LBU   T2, 0x9CCF (T0)
    0x01, 0x2A, 0x48, 0x21,  # ADDU	 T1, T1, T2
    0x91, 0x0A, 0x9E, 0xEF,  # LBU	 T2, 0x9EEF (T0)
    0x01, 0x2A, 0x48, 0x21,  # ADDU	 T1, T1, T2
    0x91, 0x0A, 0x9C, 0xD3,  # LBU	 T2, 0x9CD3 (T0)
    0x01, 0x2A, 0x48, 0x21,  # ADDU	 T1, T1, T2
    0x3C, 0x08, 0x80, 0x38,  # LUI	 T0, 0x8038
    0x91, 0x0A, 0x7A, 0xDD,  # LBU	 T2, 0x7ADD (T0)
    0x01, 0x2A, 0x48, 0x21,  # ADDU	 T1, T1, T2
    0x3C, 0x0B, 0x80, 0x39,  # LUI	 T3, 0x8039
    0x91, 0x6A, 0x9B, 0xE0,  # LBU	 T2, 0x9BE0 (T3)
    0x01, 0x2A, 0x48, 0x21,  # ADDU  T1, T1, T2
    0x11, 0x20, 0x00, 0x06,  # BEQZ	 T1, [forward 0x06]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x11, 0x40, 0x00, 0x02,  # BEQZ  T2, [forward 0x02]
    0x25, 0x4A, 0xFF, 0xFF,  # ADDIU T2, T2, 0xFFFF
    0xA1, 0x6A, 0x9B, 0xE0,  # SB	 T2, 0x9BE0 (T3)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x00, 0x00, 0x00, 0x00,  # NOP
    # Item-specific checks
    0x3C, 0x08, 0x80, 0x34,  # LUI 	 T0, 0x8034
    0x91, 0x08, 0x28, 0x91,  # LBU	 T0, 0x2891 (T0)
    0x24, 0x09, 0x00, 0x02,  # ADDIU T1, R0, 0x0002
    0x15, 0x09, 0x00, 0x16,  # BNE	 T0, T1, [forward 0x16]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x25, 0x6B, 0x9B, 0xDF,  # ADDIU T3, T3, 0x9BDF
    0x91, 0x64, 0x00, 0x00,  # LBU	 A0, 0x0000 (T3)
    0x14, 0x80, 0x00, 0x03,  # BNEZ	 A0, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x10, 0x00, 0x00, 0x05,  # B	 [forward 0x05]
    0x25, 0x6B, 0x00, 0x02,  # ADDIU T3, T3, 0x0002
    0x24, 0x09, 0x00, 0x0F,  # ADDIU T1, R0, 0x000F
    0xA1, 0x69, 0x00, 0x01,  # SB	 T1, 0x0001 (T3)
    0x08, 0x04, 0xED, 0xCE,  # J	 0x8013B738
    0xA1, 0x60, 0x00, 0x00,  # SB	 R0, 0x0000 (T3)
    0x91, 0x64, 0x00, 0x00,  # LBU	 A0, 0x0000 (T3)
    0x14, 0x80, 0x00, 0x02,  # BNEZ	 A0, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x10, 0x00, 0x00, 0x07,  # BNE	 T0, T1, [forward 0x07]
    0x24, 0x09, 0x00, 0x0F,  # ADDIU T1, R0, 0x000F
    0xA1, 0x69, 0xFF, 0xFF,  # SB	 T1, 0xFFFF (T3)
    0xA1, 0x60, 0x00, 0x00,  # SB	 R0, 0x0000 (T3)
    0x95, 0x6C, 0x00, 0xDD,  # LHU	 T4, 0x00DD (T3)
    0x25, 0x8C, 0x00, 0x01,  # ADDIU T4, T4, 0x0001
    0x08, 0x04, 0xED, 0xCE,  # J	 0x8013B738
    0xA5, 0x6C, 0x00, 0xDD,  # SH	 T4, 0x00DD (T3)
    # DeathLink-specific checks
    0x3C, 0x0B, 0x80, 0x39,  # LUI   T3, 0x8039
    0x25, 0x6B, 0x9B, 0xE1,  # ADDIU T3, T3, 0x9BE1
    0x95, 0x64, 0x00, 0x01,  # LHU   A0, 0x0001 (T3)
    0x14, 0x80, 0x00, 0x02,  # BNEZ  A0, [forward 0x02]
    0x91, 0x69, 0x00, 0xA7,  # LBU   T1, 0x00A7 (T3)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x31, 0x2A, 0x00, 0x80,  # ANDI  T2, T1, 0x0080
    0x11, 0x40, 0x00, 0x02,  # BEQZ  T2, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x35, 0x29, 0x00, 0x80,  # ORI   T1, T1, 0x0080
    0xA1, 0x69, 0x00, 0xA7,  # SB    T1, 0x00A7 (T3)
    0x24, 0x84, 0xFF, 0xFF,  # ADDIU A0, A0, 0xFFFF
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
]

deathlink_counter_decrementer = [
    # Decrements the DeathLink counter if it's above zero upon loading a previous state. Checking this number will be
    # how the client will tell if a player's cause of death was something in-game or a DeathLink (and send a DeathLink
    # to the server if it was the former). Also resets the remote item values to 00 so the player's received items don't
    # get mucked up in-game.
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x95, 0x09, 0x9B, 0xE2,  # LHU   T1, 0x9BE2 (T0)
    0x11, 0x20, 0x00, 0x02,  # BEQZ  T1, 0x803FC154
    0x25, 0x29, 0xFF, 0xFF,  # ADDIU T1, T1, 0xFFFF
    0xA5, 0x09, 0x9B, 0xE2,  # SH    T1, 0x9BE2
    0x24, 0x09, 0x00, 0xFF,  # ADDIU T1, R0, 0x00FF
    0xA1, 0x09, 0x9B, 0xE0,  # SB    T1, 0x9BE0 (T0)
    0xA1, 0x00, 0x9B, 0xDF,  # SB	 R0, 0x9BDF (T0)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0xA1, 0x00, 0x9B, 0xE1   # SB	 R0, 0x9BE1 (T0)
]

death_flag_unsetter = [
    # Un-sets the Death status bitflag when overwriting the "Restart this stage" state and sets health to full if it's
    # empty. This is to ensure DeathLinked players won't get trapped in a perpetual death loop for eternity should they
    # receive one right before transitioning to a different stage.
    0x3C, 0x04, 0x80, 0x39,  # LUI   A0, 0x8039
    0x90, 0x88, 0x9C, 0x88,  # LBU   T0, 0x9C88 (A0)
    0x31, 0x09, 0x00, 0x80,  # ANDI  T1, T0, 0x0080
    0x01, 0x09, 0x40, 0x23,  # SUBU  T0, T0, T1
    0x90, 0x8A, 0x9C, 0x3F,  # LBU   T2, 0x9C3F (A0)
    0x24, 0x09, 0x00, 0x64,  # ADDIU T1, R0, 0x0064
    0x51, 0x40, 0x00, 0x01,  # BEQZL T2, [forward 0x01]
    0xA0, 0x89, 0x9C, 0x3F,  # SB    T1, 0x9C3F (A0)
    0x08, 0x00, 0x6D, 0xAE,  # J     0x8001B6B8
    0xA0, 0x88, 0x9C, 0x88   # SB    T0, 0x9C88 (A0)
]

warp_menu_opener = [
    # Enables opening the Stage Select menu by pausing while holding Z + R when not in a boss fight, the castle
    # crumbling sequence following Fake Dracula, or Renon's arena (in the few seconds after his health bar vanishes).
    0x3C, 0x08, 0x80, 0x0D,  # LUI   T0, 0x800D
    0x85, 0x09, 0x5E, 0x20,  # LH    T1, 0x5E20 (T0)
    0x24, 0x08, 0x30, 0x10,  # ADDIU T0, R0, 0x3010
    0x15, 0x09, 0x00, 0x10,  # BNE   T0, T1, [forward 0x10]
    0x3C, 0x08, 0x80, 0x35,  # LUI   T0, 0x8035
    0x91, 0x08, 0xF7, 0xD8,  # LBU   T0, 0xF7D8 (T0)
    0x24, 0x09, 0x00, 0x20,  # ADDIU T1, R0, 0x0020
    0x11, 0x09, 0x00, 0x0C,  # BEQ   T0, T1, [forward 0x0C]
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x09, 0x9B, 0xFA,  # LBU   T1, 0x9BFA (T0)
    0x31, 0x29, 0x00, 0x01,  # ANDI  T1, T1, 0x0001
    0x15, 0x20, 0x00, 0x08,  # BNEZ  T1, [forward 0x08]
    0x8D, 0x09, 0x9E, 0xE0,  # LW    T1, 0x9EE0
    0x3C, 0x0A, 0x00, 0x1B,  # LUI   T2, 0x001B
    0x25, 0x4A, 0x00, 0x03,  # ADDIU T2, T2, 0x0003
    0x11, 0x2A, 0x00, 0x04,  # BEQ   T1, T2, [forward 0x04]
    0x24, 0x08, 0xFF, 0xFC,  # ADDIU T0, R0, 0xFFFC
    0x3C, 0x09, 0x80, 0x34,  # LUI   T1, 0x8034
    0x08, 0x04, 0xDA, 0x70,  # J     0x80136960
    0xAD, 0x28, 0x20, 0x84,  # SW    T0, 0x2084 (T1)
    0x08, 0x04, 0xDA, 0x70,  # J     0x80136960
    0xA4, 0x4E, 0x64, 0x36   # SH    T6, 0x6436 (V0)
]

give_subweapon_stopper = [
    # Extension to "give subweapon" function to not change the player's weapon if the received item is a Stake or Rose
    0x24, 0x09, 0x00, 0x11,  # ADDIU T1, R0, 0x0011
    0x11, 0x24, 0x00, 0x04,  # BEQ   T1, A0, [forward 0x04]
    0x24, 0x09, 0x00, 0x12,  # ADDIU T1, R0, 0x0012
    0x11, 0x24, 0x00, 0x02,  # BEQ   T1, A0, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0xA4, 0x6D, 0x61, 0x8A,  # SH    T5, 0x618A (V1)
    0x08, 0x04, 0xF0, 0xBF,  # J     0x8013C2FC
]

give_powerup_stopper = [
    # Extension to "give PowerUp" function to not increase the player's PowerUp count beyond 2
    0x24, 0x0D, 0x00, 0x02,  # ADDIU T5, R0, 0x0002
    0x55, 0x6D, 0x00, 0x01,  # BNEL  T3, T5, [forward 1]
    0xA4, 0x6C, 0x62, 0x34,  # SH    T4, 0x6234 (V1)
    0x08, 0x04, 0xF0, 0xBF   # J     0x8013C2FC
]

npc_item_hack = [
    # Hack to make NPC/shelf items show item textboxes when received.
    0x3C, 0x09, 0x80, 0x39,  # LUI   T1, 0x8039
    0x24, 0x0A, 0x00, 0x20,  # ADDIU T2, R0, 0x0020
    0xA1, 0x2A, 0x9B, 0xE0,  # SB    T2, 0x9BE0 (T1)
    0x00, 0x1F, 0x56, 0x02,  # SRL   T2, RA, 24
    0x24, 0x0B, 0x00, 0x80,  # ADDIU T3, R0, 0x0080
    0x11, 0x4B, 0x00, 0x19,  # BEQ   T2, T3, [forward 0x19]
    0xAF, 0xBF, 0x00, 0x14,  # SW    RA, 0x0014 (SP)
    0x24, 0x0A, 0x00, 0x15,  # ADDIU T2, R0, 0x0015
    0x15, 0x44, 0x00, 0x06,  # BNE   T2, A0, [forward 0x06]
    0x24, 0x0B, 0x00, 0x15,  # ADDIU T3, R0, 0x0015
    0xA1, 0x2B, 0x9B, 0xDF,  # SB    T3, 0x9BDF (T1)
    0x91, 0x2C, 0x9B, 0xF0,  # LBU   T4, 0x9BF0 (T1)
    0x35, 0x8C, 0x00, 0x80,  # ORI   T4, T4, 0x0080
    0xA1, 0x2C, 0x9B, 0xF0,  # SB    T4, 0x9BF0 (T1)
    0x08, 0x04, 0xF0, 0xBF,  # J     0x8013C2FC
    0x24, 0x0A, 0x00, 0x16,  # ADDIU T2, R0, 0x0016
    0x15, 0x44, 0x00, 0x06,  # BNE   T2, A0, [forward 0x06]
    0x24, 0x0B, 0x00, 0x16,  # ADDIU T3, R0, 0x0016
    0xA1, 0x2B, 0x9B, 0xDF,  # SB    T3, 0x9BDF (T1)
    0x91, 0x2C, 0x9C, 0x18,  # LBU   T4, 0x9C18 (T1)
    0x35, 0x8C, 0x00, 0x80,  # ORI   T4, T4, 0x0080
    0xA1, 0x2C, 0x9C, 0x18,  # SB    T4, 0x9C18 (T1)
    0x08, 0x04, 0xF0, 0xBF,  # J     0x8013C2FC
    0x24, 0x0A, 0x00, 0x1A,  # ADDIU T2, R0, 0x001A
    0x15, 0x44, 0x00, 0x03,  # BNE   T2, A0, [forward 0x03]
    0x24, 0x0B, 0x00, 0x1A,  # ADDIU T3, R0, 0x001A
    0xA1, 0x2B, 0x9B, 0xDF,  # SB    T3, 0x9BDF (T1)
    0x08, 0x04, 0xF0, 0xBF,  # J     0x8013C2FC
    0x24, 0x0B, 0x00, 0x1F,  # ADDIU T3, R0, 0x001F
    0x08, 0x04, 0xF0, 0xBF,  # J     0x8013C2FC
    0xA1, 0x2B, 0x9B, 0xDF,  # SB    T3, 0x9BDF (T1)
    0x08, 0x04, 0xEF, 0xFD,  # J     0x8013C2FC
]

overlay_modifiers = [
    # Whenever a compressed overlay gets decompressed and mapped in the 0F or 0E domains, this thing will check the
    # number ID in the T0 register to tell which one it is and overwrite some instructions in it on-the-fly accordingly
    # to said number before it runs. Confirmed to NOT be a foolproof solution on console and Simple64; the instructions
    # may not be properly overwritten on the first execution of the overlay.

    # Prevent being able to throw Nitro into the Hazardous Waste Disposals
    0x3C, 0x0A, 0x24, 0x02,  # LUI   T2, 0x2402
    0x25, 0x4A, 0x00, 0x01,  # ADDIU T2, T2, 0x0001
    0x24, 0x09, 0x00, 0x23,  # ADDIU T1, R0, 0x0023
    0x15, 0x09, 0x00, 0x03,  # BNE   T0, T1, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0xAF, 0x2A, 0x01, 0xD4,  # SW    T2, 0x01D4 (T9)
    # Make it so exactly one item can be taken from the Nitro shelf, regardless of the inventory and cracked walls
    0x24, 0x0B, 0x00, 0x80,  # ADDIU T3, R0, 0x0080
    0x24, 0x0C, 0x00, 0x17,  # ADDIU T4, R0, 0x0017
    0x24, 0x09, 0x00, 0x22,  # ADDIU T1, R0, 0x0022
    0x15, 0x09, 0x00, 0x09,  # BNE   T0, T1, [forward 0x09]
    0x3C, 0x0D, 0x80, 0x78,  # LUI   T5, 0x8078
    0x25, 0xAD, 0x61, 0x38,  # ADDIU T5, T5, 0x6138
    0xAF, 0x2A, 0x01, 0x80,  # SW    T2, 0x0180 (T9)
    0xAF, 0x2A, 0x01, 0x94,  # SW    T2, 0x0194 (T9)
    0xAF, 0x2D, 0x01, 0xB0,  # SW    T5, 0x01B0 (T9)
    0xA3, 0x2B, 0x01, 0xB7,  # SB    T3, 0x01B7 (T9)
    0xA3, 0x2C, 0x01, 0xBB,  # SB    T4, 0x01BB (T9)
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0xAF, 0x20, 0x01, 0xCC,  # SW    R0, 0x01CC (T9)
    # Make it so exactly one item can be taken from the Mandragora shelf, regardless of the inventory and cracked walls
    0x24, 0x09, 0x00, 0x21,  # ADDIU T1, R0, 0x0021
    0x15, 0x09, 0x00, 0x09,  # BNE   T0, T1, [forward 0x09]
    0x3C, 0x0D, 0x10, 0x00,  # LUI   T5, 0x1000
    0x25, 0xAD, 0x00, 0x0F,  # ADDIU T5, T5, 0x000F
    0xAF, 0x2A, 0x01, 0x80,  # SW    T2, 0x0180 (T9)
    0xAF, 0x2A, 0x01, 0x94,  # SW    T2, 0x0194 (T9)
    0xA3, 0x2B, 0x01, 0xD4,  # SB    T3, 0x01D4 (T9)
    0xA3, 0x2B, 0x01, 0xE3,  # SB    T3, 0x01E3 (T9)
    0xA3, 0x2C, 0x01, 0xE7,  # SB    T4, 0x01E7 (T9)
    0xAF, 0x2D, 0x01, 0xF8,  # SW    T5, 0x01F8 (T9)
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    # Fix to allow placing both bomb components at a cracked wall at once while having multiple copies of each, and
    # prevent placing them at the downstairs crack altogether until the seal is removed
    0x24, 0x09, 0x00, 0x24,  # ADDIU T1, R0, 0x0024
    0x15, 0x09, 0x00, 0x0F,  # BNE   T0, T1, [forward 0x0F]
    0x24, 0x0A, 0x00, 0x40,  # ADDIU T2, R0, 0x0040
    0x24, 0x0B, 0xC3, 0x38,  # ADDIU T3, R0, 0xC338
    0x24, 0x0C, 0xC3, 0xD4,  # ADDIU T4, R0, 0xC3D4
    0x24, 0x0D, 0xC3, 0x8C,  # ADDIU T5, R0, 0xC38C
    0xA3, 0x2A, 0x03, 0x0F,  # SB    T2, 0x030F (T9)
    0xA7, 0x2B, 0x03, 0x12,  # SH    T3, 0x0312 (T9)
    0xA3, 0x2A, 0x03, 0x3F,  # SB    T2, 0x033F (T9)
    0xA7, 0x2B, 0x03, 0x42,  # SH    T3, 0x0342 (T9)
    0xA3, 0x2A, 0x03, 0xE3,  # SB    T2, 0x03E3 (T9)
    0xA7, 0x2C, 0x03, 0xE6,  # SH    T4, 0x03E6 (T9)
    0xA3, 0x2A, 0x03, 0x9F,  # SB    T2, 0x039F (T9)
    0xA7, 0x2D, 0x03, 0xA2,  # SH    T5, 0x03A2 (T9)
    0xA3, 0x2A, 0x03, 0xCB,  # SB    T2, 0x03CB (T9)
    0xA7, 0x2D, 0x03, 0xCE,  # SH    T5, 0x03CE (T9)
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    # Disable the costume and Hard Mode flag checks so that pressing Up on the Player Select screen will always allow
    # the characters' alternate costumes to be used as well as Hard Mode being selectable without creating save data.
    0x24, 0x09, 0x01, 0x2E,  # ADDIU T1, R0, 0x012E
    0x15, 0x09, 0x00, 0x0A,  # BNE   T0, T1, [forward 0x0A]
    0x3C, 0x0A, 0x3C, 0x0B,  # LUI   T2, 0x3C0B
    0x25, 0x4A, 0x80, 0x00,  # ADDIU T2, T2, 0x8000
    0x24, 0x0B, 0x24, 0x0E,  # ADDIU T3, R0, 0x240E
    0x24, 0x0C, 0x24, 0x0F,  # ADDIU T4, R0, 0x240F
    0x24, 0x0D, 0x00, 0x24,  # ADDIU T5, R0, 0x0024
    0xAF, 0x2A, 0x0C, 0x78,  # SW    T2, 0x0C78 (T9)
    0xA7, 0x2B, 0x0C, 0xA0,  # SH    T3, 0x0CA0 (T9)
    0xA7, 0x2C, 0x0C, 0xDC,  # SH    T4, 0x0CDC (T9)
    0xA3, 0x2D, 0x01, 0x68,  # SB    T5, 0x0024 (T9)
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    # Overwrite instructions in the Forest end cutscene script to store a spawn position ID instead of a cutscene ID.
    0x24, 0x09, 0x00, 0x2E,  # ADDIU T1, R0, 0x002E
    0x15, 0x09, 0x00, 0x04,  # BNE   T0, T1, [forward 0x04]
    0x3C, 0x0A, 0xA0, 0x58,  # LUI   T2, 0xA058
    0x25, 0x4A, 0x64, 0x2B,  # ADDIU T2, T2, 0x642B
    0xAF, 0x2A, 0x0D, 0x88,  # SW    T2, 0x0D88 (T9)
    0xAF, 0x20, 0x0D, 0x98,  # SW    R0, 0x0D98 (T9)
    0x03, 0x20, 0x00, 0x08,  # JR    T9
]

double_component_checker = [
    # When checking to see if a bomb component can be placed at a cracked wall, this will run if the code lands at the
    # "no need to set 2" outcome to see if the other can be set.

    # Mandragora checker
    0x10, 0x40, 0x00, 0x07,  # BEQZ  V0, [forward 0x07]
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x31, 0x09, 0x80, 0x00,  # ANDI  T1, T0, 0x8000
    0x15, 0x20, 0x00, 0x08,  # BNEZ  T1, [forward 0x08]
    0x91, 0x49, 0x9C, 0x5D,  # LBU   T1, 0x9C5D (T2)
    0x11, 0x20, 0x00, 0x06,  # BEQZ  T1, 0x80183938
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x10, 0x00, 0x00, 0x07,  # B     [forward 0x07]
    0x31, 0xE9, 0x01, 0x00,  # ANDI  T1, T7, 0x0100
    0x15, 0x20, 0x00, 0x02,  # BNEZ  T1, [forward 0x02]
    0x91, 0x49, 0x9C, 0x5D,  # LBU   T1, 0x9C5D (T2)
    0x15, 0x20, 0x00, 0x03,  # BNEZ  T1, [forward 0x03]
    0x3C, 0x19, 0x80, 0x00,  # LUI   T9, 0x8000
    0x27, 0x39, 0x15, 0x90,  # ADDIU T9, T9, 0x1590
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0x24, 0x09, 0x00, 0x01,  # ADDIU T1, R0, 0x0001
    0xA4, 0xE9, 0x00, 0x4C,  # SH    T1, 0x004C (A3)
    0x3C, 0x19, 0x0E, 0x00,  # LUI   T9, 0x0E00
    0x27, 0x39, 0x03, 0xE0,  # ADDIU T9, T9, 0x03E0
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0x00, 0x00, 0x00, 0x00,  # NOP
    # Nitro checker
    0x10, 0x40, 0x00, 0x07,  # BEQZ  V0, [forward 0x07]
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x31, 0x69, 0x40, 0x00,  # ANDI  T1, T3, 0x4000
    0x15, 0x20, 0x00, 0x08,  # BNEZ  T1, [forward 0x08]
    0x91, 0x49, 0x9C, 0x5C,  # LBU   T1, 0x9C5C
    0x11, 0x20, 0x00, 0x06,  # BEQZ  T1, [forward 0x06]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x10, 0x00, 0xFF, 0xF4,  # B     [backward 0x0B]
    0x91, 0x4F, 0x9C, 0x18,  # LBU   T7, 0x9C18 (T2)
    0x31, 0xE9, 0x00, 0x02,  # ANDI  T1, T7, 0x0002
    0x15, 0x20, 0xFF, 0xEC,  # BNEZ  T1, [backward 0x13]
    0x91, 0x49, 0x9C, 0x5C,  # LBU   T1, 0x9C5C (T2)
    0x15, 0x20, 0xFF, 0xEF,  # BNEZ  T1, [backward 0x15]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x10, 0x00, 0xFF, 0xE8,  # B     [backward 0x17]
    0x00, 0x00, 0x00, 0x00,  # NOP
]

downstairs_seal_checker = [
    # This will run specifically for the downstairs crack to see if the seal has been removed before then deciding to
    # let the player set the bomb components or not. An anti-dick measure, since there is a limited number of each
    # component per world.
    0x14, 0x40, 0x00, 0x04,  # BNEZ  V0, [forward 0x04]
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x91, 0x4A, 0x9C, 0x18,  # LBU   T2, 0x9C18 (T2)
    0x31, 0x4A, 0x00, 0x01,  # ANDI  T2, T2, 0x0001
    0x11, 0x40, 0x00, 0x03,  # BEQZ  T2, [forward 0x03]
    0x3C, 0x19, 0x80, 0x00,  # LUI   T9, 0x8000
    0x27, 0x39, 0x14, 0x48,  # ADDIU T9, T9, 0x1448
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0x3C, 0x19, 0x0E, 0x00,  # LUI   T9, 0x0E00
    0x27, 0x39, 0x02, 0xB4,  # ADDIU T9, T9, 0x02B4
    0x03, 0x20, 0x00, 0x08,  # JR    T9
    0x00, 0x00, 0x00, 0x00,  # NOP
]

scene_data_modifiers = [
    # Overwrites the scene data on-the-fly after it loads and before the game reads it to load objects. Good for
    # changing anything that is part of a compression chain in the ROM data, including some freestanding item IDs.
    # Also jumps to the function that overwrites the "Restart this stage" data if entering through the back of a level.

    0x08, 0x00, 0x6D, 0xAA,  # J	 0x8001B6A8
    0x00, 0x00, 0x00, 0x00,  # NOP
    # Demo checker (if we're in a title demo, don't do any of this)
    0x3C, 0x02, 0x80, 0x34,  # LUI   V0, 0x8034
    0x94, 0x49, 0x24, 0x4A,  # LHU   T1, 0x244A (V0)
    0x11, 0x20, 0x00, 0x02,  # BEQZ  T1,     [forward 0x02]
    # Zero checker (if there are zeroes in the word at 0x8034244A, where the entity list address is stored, don't do
    # any of this either)
    0x8C, 0x42, 0x2B, 0x00,  # LW    V0, 0x2B00 (V0)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x14, 0x40, 0x00, 0x02,  # BNEZ  V0,     [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x19, 0x9E, 0xE3,  # LBU	 T9, 0x9EE3 (T0)
    0x91, 0x08, 0x9E, 0xE1,  # LBU   T0, 0x9EE1 (T0)
    # Forest of Silence (replaces 1 invisible chicken)
    0x15, 0x00, 0x00, 0x06,  # BNEZ  T0,     [forward 0x06]
    0x34, 0x0A, 0x00, 0x01,  # ORI   T2, R0, 0x0001         <- Werewolf plaque
    0xA4, 0x4A, 0x01, 0xC8,  # SH    T2, 0x01C8 (V0)
    0x24, 0x09, 0x00, 0x01,  # ADDIU T1, R0, 0x0001
    0x11, 0x39, 0xFF, 0xED,  # BEQ   T1, T9, [backward 0x12]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Villa front yard (replaces 1 moneybag and 2 beefs)
    0x24, 0x09, 0x00, 0x03,  # ADDIU T1, R0, 0x0003
    0x15, 0x09, 0x00, 0x08,  # BNE   T0, T1, [forward 0x08]
    0x34, 0x0A, 0x00, 0x01,  # ORI   T2, R0, 0x0001         <- Fountain FL
    0x34, 0x0B, 0x00, 0x01,  # ORI   T3, R0, 0x0001         <- Fountain RL
    0x34, 0x0C, 0x00, 0x1F,  # ORI   T4, R0, 0x0001         <- Dog food gate
    0xA4, 0x4A, 0x00, 0x58,  # SH    T2, 0x0058 (V0)
    0xA4, 0x4B, 0x00, 0x38,  # SH    T3, 0x0038 (V0)
    0xA4, 0x4C, 0x00, 0x68,  # SH    T4, 0x0068 (V0)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x00, 0x00, 0x00, 0x00,  # NOP
    # Villa living area (Replaces 1 chicken, 1 knife, and 3 invisible Purifyings)
    0x24, 0x09, 0x00, 0x05,  # ADDIU T1, R0, 0x0005
    0x15, 0x09, 0x00, 0x19,  # BNE   T0, T1, [forward 0x19]
    0x34, 0x0A, 0x00, 0x01,  # ORI   T2, R0, 0x0001         <- Storeroom R
    0x34, 0x0B, 0x00, 0x10,  # ORI   T3, R0, 0x0001         <- Hallway knife
    0x34, 0x0C, 0x00, 0x01,  # ORI   T4, R0, 0x0001         <- Painting
    0x34, 0x0D, 0x00, 0x01,  # ORI   T5, R0, 0x0001         <- Dining Room vase
    0x34, 0x0E, 0x00, 0x01,  # ORI   T6, R0, 0x0001         <- Archives table
    0xA4, 0x4A, 0x00, 0x78,  # SH    T2, 0x0078 (V0)
    0xA4, 0x4B, 0x00, 0xC8,  # SH    T3, 0x00C8 (V0)
    0xA4, 0x4C, 0x01, 0x08,  # SH    T4, 0x0108 (V0)
    0xA4, 0x4D, 0x01, 0x28,  # SH    T5, 0x0128 (V0)
    0xA4, 0x4E, 0x01, 0x38,  # SH    T6, 0x0138 (V0)
    0x34, 0x0A, 0xFF, 0x04,  # ORI   T2, R0, 0xFF04
    0xA4, 0x4A, 0x00, 0x9C,  # SH    T2, 0x009C (V0)
    0xA4, 0x4A, 0x00, 0xAC,  # SH    T2, 0x00AC (V0)
    0xA4, 0x4A, 0x00, 0xBC,  # SH    T2, 0x00BC (V0)
    0xA4, 0x4A, 0x00, 0xCC,  # SH    T2, 0x00CC (V0)
    0x34, 0x0A, 0x80, 0x00,  # ORI   T2, R0, 0x8000
    0x24, 0x0B, 0x00, 0x01,  # ADDIU T3, R0, 0x0001
    0x24, 0x0C, 0x00, 0x40,  # ADDIU T4, R0, 0x0040
    0x24, 0x0D, 0x00, 0x80,  # ADDIU T5, R0, 0x0080
    0xA4, 0x4A, 0x00, 0xCA,  # SH    T2, 0x00CA (V0)
    0xA4, 0x4B, 0x00, 0xBA,  # SH    T3, 0x00BA (V0)
    0xA4, 0x4C, 0x00, 0x9A,  # SH    T4, 0x009A (V0)
    0xA4, 0x4D, 0x00, 0xAA,  # SH    T5, 0x00AA (V0)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x00, 0x00, 0x00, 0x00,  # NOP
    # Tunnel (replaces 1 invisible Cure Ampoule)
    0x24, 0x09, 0x00, 0x07,  # ADDIU T1, R0, 0x0007
    0x15, 0x09, 0x00, 0x06,  # BNE   T0, T1, [forward 0x06]
    0x34, 0x0A, 0x00, 0x01,  # ORI   T2, R0, 0x0001         <- Bucket
    0xA4, 0x4A, 0x02, 0x68,  # SH    T2, 0x0268 (V0)
    0x24, 0x09, 0x00, 0x11,  # ADDIU T1, R0, 0x0011
    0x11, 0x39, 0xFF, 0xC0,  # BEQ   T1, T9, [backward 0x3F]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Castle Center factory floor (replaces 1 moneybag, 1 jewel, and gives every lizard man coffin item a unique flag)
    0x24, 0x09, 0x00, 0x0B,  # ADDIU T1, R0, 0x000B
    0x15, 0x09, 0x00, 0x12,  # BNE   T0, T1, [forward 0x12]
    0x34, 0x0A, 0x00, 0x1A,  # ORI   T2, R0, 0x0001         <- Lizard coffin nearside mid-right
    0x34, 0x0B, 0x00, 0x03,  # ORI   T3, R0, 0x0001         <- Lizard coffin nearside mid-left
    0xA4, 0x4A, 0x00, 0xC8,  # SH    T2, 0x00C8 (V0)
    0xA4, 0x4B, 0x00, 0xD8,  # SH    T3, 0x00D8 (V0)
    0x24, 0x0A, 0x10, 0x00,  # ADDIU T2, R0, 0x1000
    0x24, 0x0B, 0x20, 0x00,  # ADDIU T3, R0, 0x2000
    0x24, 0x0C, 0x04, 0x00,  # ADDIU T4, R0, 0x0400
    0x24, 0x0D, 0x08, 0x00,  # ADDIU T5, R0, 0x0800
    0x24, 0x0E, 0x02, 0x00,  # ADDIU T6, R0, 0x0200
    0x24, 0x0F, 0x01, 0x00,  # ADDIU T7, R0, 0x0100
    0xA4, 0x4A, 0x00, 0x9A,  # SH    T2, 0x009A (V0)
    0xA4, 0x4B, 0x00, 0xAA,  # SH    T3, 0x00AA (V0)
    0xA4, 0x4C, 0x00, 0xCA,  # SH    T4, 0x00CA (V0)
    0xA4, 0x4D, 0x00, 0xBA,  # SH    T5, 0x00BA (V0)
    0xA4, 0x4E, 0x00, 0xDA,  # SH    T6, 0x00DA (V0)
    0xA4, 0x4F, 0x00, 0xEA,  # SH    T7, 0x00EA (V0)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x00, 0x00, 0x00, 0x00,  # NOP
    # Duel Tower (replaces a flame on top of a rotating lion pillar with a White Jewel on the invisible bridge ledge)
    0x24, 0x09, 0x00, 0x13,  # ADDIU T1, R0, 0x0013
    0x15, 0x09, 0x00, 0x0F,  # BNE   T0, T1, [forward 0x0F]
    0x3C, 0x0A, 0x00, 0xB9,  # LUI   T2, 0x00BB
    0x25, 0x4A, 0x01, 0x2B,  # ADDIU T2, T2, 0x012B
    0x3C, 0x0B, 0xFE, 0x2A,  # LUI   T3, 0xFE2A
    0x25, 0x6B, 0x00, 0x27,  # ADDIU T3, T3, 0x0027
    0x3C, 0x0C, 0x00, 0x01,  # LUI   T4, 0x0001
    0x3C, 0x0D, 0x00, 0x22,  # LUI   T5, 0x0022
    0x25, 0xAD, 0x01, 0x00,  # ADDIU T5, T5, 0x0100
    0xAC, 0x4A, 0x0A, 0x80,  # SW    T2, 0x0AE0 (V0)
    0xAC, 0x4B, 0x0A, 0x84,  # SW    T3, 0x0AE4 (V0)
    0xAC, 0x4C, 0x0A, 0x88,  # SW    T4, 0x0AE8 (V0)
    0xAC, 0x4D, 0x0A, 0x8C,  # SW    T5, 0x0AEC (V0)
    0x24, 0x09, 0x00, 0x01,  # ADDIU T1, R0, 0x0001
    0x11, 0x39, 0xFF, 0x9B,  # BEQ   T1, T9, [backward 0x63]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Castle Keep outside (replaces 1 invisible Healing Kit and gives both invisible Healing Kits pickup flags)
    0x24, 0x09, 0x00, 0x14,  # ADDIU T1, R0, 0x0014
    0x15, 0x09, 0x00, 0x0A,  # BNE   T0, T1, [forward 0x0A]
    0x34, 0x0A, 0x00, 0x01,  # ORI   T2, R0, 0x0001         <- Right flame
    0xA4, 0x4A, 0x00, 0x58,  # SH    T2, 0x0058 (V0)
    0x24, 0x0A, 0x00, 0x01,  # ADDIU T2, R0, 0x0001
    0x24, 0x0B, 0x00, 0x02,  # ADDIU T3, R0, 0x0002
    0xA4, 0x4A, 0x00, 0x4A,  # SH    T2, 0x004A (V0)
    0xA4, 0x4B, 0x00, 0x5A,  # SH    T3, 0x005A (V0)
    0x24, 0x09, 0x00, 0x02,  # ADDIU T1, R0, 0x0002
    0x11, 0x39, 0xFF, 0x8F,  # BEQ   T0, T1, [backward 0x70]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Castle Wall main area (sets a flag for the freestanding Holy Water if applicable and the "beginning of stage"
    # state if entered from the rear)
    0x24, 0x09, 0x00, 0x02,  # ADDIU T1, R0, 0x0002
    0x15, 0x09, 0x00, 0x06,  # BNE   T0, T1, [forward 0x06]
    0x24, 0x09, 0x00, 0x04,  # ADDIU T1, R0, 0x0004
    0xA0, 0x49, 0x00, 0x9B,  # SB    T1, 0x009B (V0)
    0x24, 0x09, 0x00, 0x10,  # ADDIU T1, R0, 0x0010
    0x11, 0x39, 0xFF, 0x87,  # BEQ   T1, T9, [backward 0x79]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Villa vampire crypt (sets the "beginning of stage" state if entered from the rear, as well as the "can warp here"
    # flag if arriving for the first time)
    0x24, 0x09, 0x00, 0x1A,  # ADDIU T1, R0, 0x001A
    0x15, 0x09, 0x00, 0x08,  # BNE   T0, T1, [forward 0x08]
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x91, 0x4B, 0x9C, 0x1C,  # LBU   T3, 0x9C1C (T2)
    0x35, 0x6B, 0x00, 0x01,  # ORI   T3, T3, 0x0001
    0xA1, 0x4B, 0x9C, 0x1C,  # SB    T3, 0x9C1C (T2)
    0x24, 0x09, 0x00, 0x03,  # ADDIU T1, R0, 0x0003
    0x11, 0x39, 0xFF, 0x7D,  # BEQ   T1, T9, [backward 0x84]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Underground Waterway (sets the "beginning of stage" state if entered from the rear)
    0x24, 0x09, 0x00, 0x08,  # ADDIU T1, R0, 0x0008
    0x15, 0x09, 0x00, 0x04,  # BNE   T0, T1, [forward 0x04]
    0x24, 0x09, 0x00, 0x01,  # ADDIU T1, R0, 0x0001
    0x11, 0x39, 0xFF, 0x77,  # BEQ   T1, T9, [backward 0x8B]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Castle Center elevator top (sets the "beginning of stage" state if entered from either rear, as well as the "can
    # warp here" flag if arriving for the first time)
    0x24, 0x09, 0x00, 0x0F,  # ADDIU T1, R0, 0x000F
    0x15, 0x09, 0x00, 0x0A,  # BNE   T0, T1, [forward 0x0A]
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x91, 0x4B, 0x9C, 0x1C,  # LBU   T3, 0x9C1C (T2)
    0x35, 0x6B, 0x00, 0x02,  # ORI   T3, T3, 0x0002
    0xA1, 0x4B, 0x9C, 0x1C,  # SB    T3, 0x9C1C (T2)
    0x24, 0x09, 0x00, 0x02,  # ADDIU T1, R0, 0x0002
    0x11, 0x39, 0xFF, 0x6D,  # BEQ   T1, T9, [backward 0x96]
    0x24, 0x09, 0x00, 0x03,  # ADDIU T1, R0, 0x0003
    0x11, 0x39, 0xFF, 0x6B,  # BEQ   T1, T9, [backward 0x98]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Tower of Execution (sets the "beginning of stage" state if entered from the rear)
    0x24, 0x09, 0x00, 0x10,  # ADDIU T1, R0, 0x0010
    0x15, 0x09, 0x00, 0x04,  # BNE   T0, T1, [forward 0x10]
    0x24, 0x09, 0x00, 0x12,  # ADDIU T1, R0, 0x0012
    0x11, 0x39, 0xFF, 0x65,  # BEQ   T1, T9, [backward 0x9B]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Tower of Sorcery (sets the "beginning of stage" state if entered from the rear)
    0x24, 0x09, 0x00, 0x11,  # ADDIU T1, R0, 0x0011
    0x15, 0x09, 0x00, 0x04,  # BNE   T0, T1, [forward 0x04]
    0x24, 0x09, 0x00, 0x13,  # ADDIU T1, R0, 0x0013
    0x11, 0x39, 0xFF, 0x5F,  # BEQ   T1, T9, [backward 0xA6]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Tower of Science (sets the "beginning of stage" state if entered from the rear)
    0x24, 0x09, 0x00, 0x12,  # ADDIU T1, R0, 0x0012
    0x15, 0x09, 0x00, 0x04,  # BNE   T0, T1, [forward 0x04]
    0x24, 0x09, 0x00, 0x04,  # ADDIU T1, R0, 0x0004
    0x11, 0x39, 0xFF, 0x59,  # BEQ   T1, T9, [backward 0xAD]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Room of Clocks (changes 2 candle settings if applicable and sets "begging of stage" state if spawning at end)
    0x24, 0x09, 0x00, 0x1B,  # ADDIU T1, R0, 0x001B
    0x15, 0x09, 0x00, 0x08,  # BNE   T0, T1, [forward 0x08]
    0x24, 0x09, 0x00, 0x06,  # ADDIU T1, R0, 0x0006
    0x24, 0x0A, 0x00, 0x06,  # ADDIU T2, R0, 0x0006
    0xA0, 0x49, 0x00, 0x59,  # SB    T1, 0x0059 (V0)
    0xA0, 0x4A, 0x00, 0x69,  # SB    T2, 0x0069 (V0)
    0x24, 0x09, 0x00, 0x14,  # ADDIU T1, R0, 0x0014
    0x11, 0x39, 0xFF, 0x4F,  # BEQ   T1, T9, [backward 0xB8]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    # Fan meeting room (sets "beginning of stage" flag)
    0x24, 0x09, 0x00, 0x19,  # ADDIU T1, R0, 0x0019
    0x11, 0x09, 0xFF, 0x4B,  # BEQ   T1, T9, [backward 0xBD]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
]

renon_cutscene_checker = [
    # Prevents Renon's departure/pre-fight cutscene from playing if the player is either in the escape sequence or both
    # did not spend the required 30K to fight him and lacks the required Special2s to fight Dracula.
    0x15, 0x81, 0x00, 0x02,  # BNE   T4, AT, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xB3,  # J     0x80127ACC
    0x24, 0x09, 0x00, 0x16,  # ADDIU T1, R0, 0x0016
    0x11, 0xC9, 0x00, 0x02,  # BEQ   T6, T1, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xCA,  # J     0x80127B28
    0x24, 0x19, 0x00, 0x00,  # ADDIU T9, R0, 0x0000
    0x8C, 0x69, 0x62, 0x08,  # LW    T1, 0x6208 (V1)
    0x29, 0x2A, 0x75, 0x31,  # SLTI  T2, T1, 0x7531
    0x51, 0x40, 0x00, 0x01,  # BEQZL T2,     [forward 0x01]
    0x24, 0x19, 0x00, 0x01,  # ADDIU T9, R0, 0x0001
    0x3C, 0x0B, 0x80, 0x13,  # LUI   T3, 0x8013
    0x91, 0x6B, 0xAC, 0x9F,  # LBU   T3, 0xAC9F (T3)
    0x90, 0x6C, 0x61, 0x94,  # LBU   T4, 0x6194 (V1)
    0x01, 0x8B, 0x50, 0x2A,  # SLT   T2, T4, T3
    0x51, 0x40, 0x00, 0x01,  # BEQZL T2,     [forward 0x01]
    0x24, 0x19, 0x00, 0x01,  # ADDIU T9, R0, 0x0001
    0x90, 0x69, 0x61, 0x42,  # LBU   T1, 0x6142 (V1)
    0x31, 0x29, 0x00, 0x02,  # ANDI  T1, T1, 0x0002
    0x55, 0x20, 0x00, 0x01,  # BNEZL T1,     [forward 0x01]
    0x24, 0x19, 0x00, 0x00,  # ADDIU T9, R0, 0x0000
    0x17, 0x20, 0x00, 0x03,  # BNEZ  T9,     [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xCC,  # J     0x80127B30
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xCA   # J     0x80127B28
]

renon_cutscene_checker_jr = [
    # Like renon_cutscene_checker, but without the checks for the Special2 and spent money counters. Inserted instead if
    # the player chooses to guarantee or disable the Renon fight on their YAML.
    0x15, 0x81, 0x00, 0x02,  # BNE   T4, AT, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xB3,  # J     0x80127ACC
    0x24, 0x09, 0x00, 0x16,  # ADDIU T1, R0, 0x0016
    0x11, 0xC9, 0x00, 0x02,  # BEQ   T6, T1, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xCA,  # J     0x80127B28
    0x24, 0x19, 0x00, 0x01,  # ADDIU T9, R0, 0x0001
    0x90, 0x69, 0x61, 0x42,  # LBU   T1, 0x6142 (V1)
    0x31, 0x29, 0x00, 0x02,  # ANDI  T1, T1, 0x0002
    0x55, 0x20, 0x00, 0x01,  # BNEZL T1,     [forward 0x01]
    0x24, 0x19, 0x00, 0x00,  # ADDIU T9, R0, 0x0000
    0x17, 0x20, 0x00, 0x03,  # BNEZ  T9,     [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xCC,  # J     0x80127B30
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x04, 0x9E, 0xCA   # J     0x80127B28
]

ck_door_music_player = [
    # Plays Castle Keep's song if you spawn in front of Dracula's door (teleporting via the warp menu) and haven't
    # started the escape sequence yet.
    0x17, 0x01, 0x00, 0x02,  # BNE   T8, AT, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x06, 0x3D, 0xF9,  # J     0x8018F7E4
    0x24, 0x0A, 0x00, 0x00,  # ADDIU T2, R0, 0x0000
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x08, 0x9B, 0xFA,  # LBU   T0, 0x9BFA (T0)
    0x31, 0x08, 0x00, 0x02,  # ANDI  T0, T0, 0x0002
    0x51, 0x09, 0x00, 0x01,  # BEQL  T0, T1, [forward 0x01]
    0x25, 0x4A, 0x00, 0x01,  # ADDIU T2, T2, 0x0001
    0x24, 0x08, 0x00, 0x03,  # ADDIU T0, R0, 0x0003
    0x51, 0x18, 0x00, 0x01,  # BEQL  T0, T8, [forward 0x01]
    0x25, 0x4A, 0x00, 0x01,  # ADDIU T2, T2, 0x0001
    0x24, 0x0B, 0x00, 0x02,  # ADDIU T3, R0, 0x0002
    0x11, 0x4B, 0x00, 0x02,  # BEQ   T2, T3, [forward 0x02]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x06, 0x3D, 0xFD,  # J     0x8018F7F4
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x06, 0x3D, 0xF9   # J     0x8018F7E4
]

dracula_door_text_redirector = [
    # Switches the standard pointer to the map text with one to a custom message for Dracula's chamber door if the
    # current scene is Castle Keep exterior (Scene 0x14).
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x08, 0x9E, 0xE1,  # LBU   T0, 0x9EE1 (T0)
    0x24, 0x09, 0x00, 0x14,  # ADDIU T1, R0, 0x0014
    0x15, 0x09, 0x00, 0x06,  # BNE   T0, T1, [forward 0x06]
    0x3C, 0x08, 0x80, 0x14,  # LUI   T0, 0x8014
    0x25, 0x08, 0xB9, 0xF4,  # ADDIU T0, T0, 0xB9F4
    0x15, 0x1F, 0x00, 0x03,  # BNE   T0, RA, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x3C, 0x02, 0x80, 0x40,  # LUI   V0, 0x8040
    0x24, 0x42, 0xCC, 0x3C,  # ADDIU V0, V0, 0xCC3C
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

coffin_time_checker = [
    # When entering the Villa coffin, this will check to see whether it's day or night and send you to either the Tunnel
    # or Underground Waterway level slot accordingly regardless of which character you are
    0x28, 0x49, 0x00, 0x06,  # SLTI  T1, V0, 0x0006
    0x15, 0x20, 0x00, 0x05,  # BNEZ  T1, [forward 0x05]
    0x28, 0x49, 0x00, 0x12,  # SLTI  T1, V0, 0x0012
    0x11, 0x20, 0x00, 0x03,  # BEQZ  T1, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x05, 0x5A, 0xEB,  # J     0x80156BAC
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x08, 0x05, 0x5A, 0xED   # J     0x80156BB4
]

werebull_flag_unsetter = [
    # This will un-set Were-bull's defeat flag in Duel Tower after beating him so that the check above his arena can
    # still be acquired later, if it hasn't been acquired already. This is the only check in the entire game that can be
    # permanently missed even with the ability to return to levels.
    0x3C, 0x0E, 0x04, 0x00,  # LUI   T6, 0x0400
    0x15, 0xCF, 0x00, 0x06,  # BNE   T6, T7, [forward 0x06]
    0x00, 0x18, 0x74, 0x02,  # SRL   T6, T8, 16
    0x31, 0xCE, 0x20, 0x00,  # ANDI  T6, T6, 0x2000
    0x15, 0xC0, 0x00, 0x03,  # BNEZ  T6, [forward 0x03]
    0x3C, 0x0E, 0x00, 0x20,  # LUI   T6, 0x0020
    0x01, 0x4E, 0x50, 0x25,  # OR    T2, T2, T6
    0xAC, 0x4A, 0x61, 0x3C,  # SW    T2, 0x613C (V0)
    0x03, 0x20, 0x00, 0x08   # JR    T9
]

werebull_flag_unsetter_special2_electric_boogaloo = [
    # Like werebull_flag_unsetter, but with the added feature of awarding a Special2 after determining the player isn't
    # trying to beat Were-bull twice! This will be inserted over the former if the goal is set to boss hunt.
    0x3C, 0x0E, 0x04, 0x00,  # LUI   T6, 0x0400
    0x15, 0xCF, 0x00, 0x08,  # BNE   T6, T7, [forward 0x06]
    0x00, 0x18, 0x74, 0x02,  # SRL   T6, T8, 16
    0x31, 0xCE, 0x20, 0x00,  # ANDI  T6, T6, 0x2000
    0x15, 0xC0, 0x00, 0x05,  # BNEZ  T6, [forward 0x05]
    0x3C, 0x0E, 0x00, 0x20,  # LUI   T6, 0x0020
    0x01, 0x4E, 0xC0, 0x24,  # AND   T8, T2, T6
    0x01, 0x4E, 0x50, 0x25,  # OR    T2, T2, T6
    0xAC, 0x4A, 0x61, 0x3C,  # SW    T2, 0x613C (V0)
    0x17, 0x00, 0x00, 0x03,  # BNEZ  T8, [forward 0x03]
    0x3C, 0x18, 0x80, 0x39,  # LUI   T8, 0x8039
    0x24, 0x0E, 0x00, 0x05,  # ADDIU T6, R0, 0x0005
    0xA3, 0x0E, 0x9B, 0xDF,  # SB    T6, 0x9BDF (T8)
    0x03, 0x20, 0x00, 0x08   # JR    T9
]

werebull_flag_pickup_setter = [
    # Checks to see if an item being picked up is the one on top of Were-bull's arena. If it is, then it'll check to see
    # if our makeshift "Were-bull defeated once" flag and, if it is, set Were-bull's arena flag proper, so it'll
    # permanently stay down.
    0x3C, 0x08, 0x80, 0x38,  # LUI   T0, 0x8038
    0x25, 0x08, 0x3A, 0xC8,  # ADDIU T0, T0, 0x3AC8
    0x15, 0x02, 0x00, 0x07,  # BNE   T0, V0, [forward 0x07]
    0x3C, 0x08, 0x20, 0x00,  # LUI   T0, 0x2000
    0x15, 0x04, 0x00, 0x05,  # BNE   T0, A0, [forward 0x05]
    0x94, 0x49, 0x61, 0x2C,  # LHU   T1, 0x612C (V0)
    0x31, 0x29, 0x00, 0x20,  # ANDI  T1, T1, 0x0020
    0x11, 0x20, 0x00, 0x02,  # BEQZ  T1, [forward 0x02]
    0x3C, 0x0A, 0x04, 0x00,  # LUI   T2, 0x0400
    0x01, 0x4D, 0x68, 0x25,  # OR    T5, T2, T5
    0xAC, 0x4D, 0x61, 0x2C,  # SW    T5, 0x612C (V0)
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

boss_special2_giver = [
    # Enables the rewarding of Special2s upon the vanishing of a boss's health bar when defeating it.

    # Also sets a flag in the case of the Castle Wall White Dragons' health bar going away. Their defeat flag in vanilla
    # is tied to hitting the lever after killing them, so this alternate flag is used to track them for the "All Bosses"
    # goal in the event someone kills them and then warps out opting to not be a Konami pachinko champ.
    0x3C, 0x11, 0x80, 0x35,  # LUI   S1, 0x8035
    0x96, 0x2D, 0xF8, 0x34,  # LHU   T5, 0xF834 (S1)
    0x24, 0x0E, 0x3F, 0x73,  # ADDIU T6, R0, 0x3F73
    0x15, 0xAE, 0x00, 0x12,  # BNE   T5, T6, [forward 0x12]
    0x3C, 0x11, 0x80, 0x39,  # LUI   S1, 0x8039
    0x92, 0x2D, 0x9E, 0xE1,  # LBU   T5, 0x9EE1 (S1)
    0x24, 0x0E, 0x00, 0x13,  # ADDIU T6, R0, 0x0013
    0x11, 0xAE, 0x00, 0x0E,  # BEQ   T5, T6, [forward 0x0E]
    0x92, 0x2F, 0x9B, 0xFA,  # LBU   T7, 0x9BFA (S1)
    0x31, 0xEF, 0x00, 0x01,  # ANDI  T7, T7, 0x0001
    0x15, 0xE0, 0x00, 0x0B,  # BNEZ  T7,     [forward 0x0B]
    0x24, 0x0E, 0x00, 0x02,  # ADDIU T6, R0, 0x0002
    0x15, 0xAE, 0x00, 0x06,  # BNE   T5, T6, [forward 0x06]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x86, 0x2F, 0x9B, 0xF4,  # LH    T7, 0x9BF4 (S1)
    0x31, 0xED, 0x00, 0x80,  # ANDI  T5, T7, 0x0080
    0x15, 0xA0, 0x00, 0x05,  # BNEZ  T5,     [forward 0x05]
    0x35, 0xEF, 0x00, 0x80,  # ORI   T7, T7, 0x0080
    0xA6, 0x2F, 0x9B, 0xF4,  # SH    T7, 0x9BF4 (S1)
    0x24, 0x0D, 0x00, 0x05,  # ADDIU T5, R0, 0x0005
    0xA2, 0x2D, 0x9B, 0xDF,  # SB    T5, 0x9BDF (S1)
    0xA2, 0x2D, 0x9B, 0xE0,  # SB    T5, 0x9BE0 (S1)
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

crystal_goal_checker = [
    # Checks the Castle Center basement crystal's flag to see if it has been activated and puts 0x0004 in V0 to disallow
    # opening Dracula's door if it hasn't been.
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x91, 0x4B, 0x9C, 0x1B,  # LBU   T3, 0x9C1B (T2)
    0x31, 0x6A, 0x00, 0x01,  # ANDI  T2, T3, 0x0001
    0x51, 0x40, 0x00, 0x01,  # BEQZL T2, [forward 0x01]
    0x24, 0x02, 0x00, 0x04,  # ADDIU V0, R0, 0x0004
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

boss_goal_checker = [
    # Checks each boss flag to see if every boss with a health meter has been defeated and puts 0x0004 in V0 to
    # disallow opening Dracula's door if not all have been.
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x95, 0x4B, 0x9B, 0xF4,  # LHU   T3, 0x9BF4 (T2)
    0x31, 0x6D, 0x0B, 0xA0,  # ANDI  T5, T3, 0x0BA0
    0x91, 0x4B, 0x9B, 0xFB,  # LBU   T3, 0x9BFB (T2)
    0x00, 0x0B, 0x61, 0x82,  # SRL   T4, T3, 6
    0x11, 0x80, 0x00, 0x10,  # BEQZ  T4, [forward 0x10]
    0x24, 0x0C, 0x00, 0xC0,  # ADDIU T4, R0, 0x00C0
    0x01, 0xAC, 0x68, 0x21,  # ADDU  T5, T5, T4
    0x91, 0x4B, 0x9B, 0xFD,  # LBU   T3, 0x9BFD (T2)
    0x31, 0x6C, 0x00, 0x20,  # ANDI  T4, T3, 0x0020
    0x01, 0xAC, 0x68, 0x21,  # ADDU  T5, T5, T4
    0x91, 0x4B, 0x9B, 0xFE,  # LBU   T3, 0x9BFE (T2)
    0x31, 0x6C, 0x00, 0x10,  # ANDI  T4, T3, 0x0010
    0x01, 0xAC, 0x68, 0x21,  # ADDU  T5, T5, T4
    0x91, 0x4B, 0x9C, 0x18,  # LBU   T3, 0x9C18 (T2)
    0x31, 0x6C, 0x00, 0x10,  # ANDI  T4, T3, 0x0010
    0x01, 0xAC, 0x68, 0x21,  # ADDU  T5, T5, T4
    0x91, 0x4B, 0x9C, 0x1B,  # LBU   T3, 0x9C1B (T2)
    0x00, 0x0B, 0x61, 0x02,  # SRL   T4, T3, 4
    0x11, 0x80, 0x00, 0x05,  # BEQZ  T4, [forward 0x05]
    0x24, 0x0C, 0x00, 0x50,  # ADDIU T4, R0, 0x0050
    0x01, 0xAC, 0x68, 0x21,  # ADDU  T5, T5, T4
    0x24, 0x0E, 0x0C, 0xF0,  # ADDIU T6, R0, 0x0CF0
    0x55, 0xCD, 0x00, 0x01,  # BNEL  T6, T5, [forward 0x01]
    0x24, 0x02, 0x00, 0x04,  # ADDIU V0, R0, 0x0004
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

special_goal_checker = [
    # Checks the Special2 counter to see if the specified threshold has been reached and puts 0x0001 in V0 to disallow
    # opening Dracula's door if it hasn't been.
    0x3C, 0x0A, 0x80, 0x39,  # LUI   T2, 0x8039
    0x91, 0x4B, 0x9C, 0x4C,  # LBU   T3, 0x9C4C (T2)
    0x29, 0x6A, 0x00, 0x1E,  # SLTI  T2, T3, 0x001E
    0x55, 0x40, 0x00, 0x01,  # BNEZL T2, 0x8012AC8C
    0x24, 0x02, 0x00, 0x01,  # ADDIU V0, R0, 0x0001
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

warp_menu_rewrite = [
    # Rewrite to the warp menu code to ensure each option can have its own scene ID, spawn ID, and fade color.
    # Start Warp
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x10, 0x00, 0x00, 0x1F,  # B     [forward 0x1F]
    0x3C, 0x0F, 0x80, 0x00,  # LUI   T7, 0x8000
    # Warp 1
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x10, 0x00, 0x00, 0x1B,  # B     [forward 0x1B]
    0x3C, 0x0F, 0x80, 0x40,  # LUI   T7, 0x8040
    # Warp 2
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x10, 0x00, 0x00, 0x17,  # B     [forward 0x17]
    0x3C, 0x0F, 0x80, 0x80,  # LUI   T7, 0x8080
    # Warp 3
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x10, 0x00, 0x00, 0x13,  # B     [forward 0x13]
    0x3C, 0x0F, 0x00, 0x80,  # LUI   T7, 0x0080
    # Warp 4
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x3C, 0x0F, 0x00, 0x80,  # LUI   T7, 0x0080
    0x10, 0x00, 0x00, 0x0E,  # B     [forward 0x0E]
    0x25, 0xEF, 0x80, 0x00,  # ADDIU T7, T7, 0x8000
    # Warp 5
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x10, 0x00, 0x00, 0x0A,  # B     [forward 0x0A]
    0x34, 0x0F, 0x80, 0x00,  # ORI   T7, R0, 0x8000
    # Warp 6
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x3C, 0x0F, 0x80, 0x00,  # LUI   T7, 0x8000
    0x10, 0x00, 0x00, 0x05,  # B     [forward 0x05]
    0x35, 0xEF, 0x80, 0x00,  # ORI   T7, T7, 0x8000
    # Warp 7
    0x3C, 0x0E, 0x00, 0x00,  # LUI   T6, 0x0000
    0x25, 0xCE, 0x00, 0x00,  # ADDIU T6, T6, 0x0000
    0x3C, 0x0F, 0x80, 0x40,  # LUI   T7, 0x8040
    0x35, 0xEF, 0x80, 0x00,  # ORI   T7, T7, 0x8000
    # Warp Crypt
    0x3C, 0x18, 0x80, 0x0D,  # LUI   T8, 0x800D
    0x97, 0x18, 0x5E, 0x20,  # LHU   T8, 0x5E20 (T8)
    0x24, 0x19, 0x20, 0x00,  # ADDIU T9, R0, 0x2000
    0x17, 0x19, 0x00, 0x09,  # BNE   T8, T9, [forward 0x09]
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x08, 0x9C, 0x1C,  # LBU   T0, 0x9C1C (T0)
    0x31, 0x08, 0x00, 0x01,  # ANDI  T0, T0, 0x0001
    0x11, 0x00, 0x00, 0x0F,  # BEQZ  T0,     [forward 0x0F]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x3C, 0x0E, 0x00, 0x1A,  # LUI   T6, 0x001A
    0x25, 0xCE, 0x00, 0x03,  # ADDIU T6, T6, 0x0003
    0x10, 0x00, 0x00, 0x0B,  # B     [forward 0x0B]
    0x24, 0x0F, 0x00, 0x00,  # ADDIU T7, R0, 0x0000
    # Warp Elevator
    0x24, 0x19, 0x00, 0x10,  # ADDIU T9, R0, 0x0010
    0x17, 0x19, 0x00, 0x08,  # BNE   T8, T9, [forward 0x08]
    0x91, 0x08, 0x9C, 0x1C,  # LBU   T0, 0x9C1C (T0)
    0x31, 0x08, 0x00, 0x02,  # ANDI  T0, T0, 0x0002
    0x11, 0x00, 0x00, 0x05,  # BEQZ  T0,     [forward 0x05]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x3C, 0x0E, 0x00, 0x0F,  # LUI   T6, 0x000F
    0x25, 0xCE, 0x00, 0x01,  # ADDIU T6, T6, 0x0001
    0x3C, 0x0F, 0x80, 0x80,  # LUI   T7, 0x8080
    0x35, 0xEF, 0x80, 0x00,  # ORI   T7, T7, 0x8000
    # All
    0xAC, 0x6E, 0x64, 0x28,  # SW    T6, 0x6428 (V1)
    0xAC, 0x6F, 0x64, 0x2C,  # SW    T7, 0x642C (V1)
    0x24, 0x02, 0x00, 0x1E,  # ADDIU V0, R0, 0x001E
    0xA4, 0x62, 0x64, 0x30,  # SH	 V0, 0x6430 (V1)
    0xA4, 0x62, 0x64, 0x32,  # SH	 V0, 0x6432 (V1)
]

warp_pointer_table = [
    # Changed pointer table addresses to go with the warp menu rewrite
    0x80, 0x12, 0xAD, 0x74,
    0x80, 0x12, 0xAD, 0x84,
    0x80, 0x12, 0xAD, 0x94,
    0x80, 0x12, 0xAD, 0xA4,
    0x80, 0x12, 0xAD, 0xB4,
    0x80, 0x12, 0xAD, 0xC8,
    0x80, 0x12, 0xAD, 0xD8,
    0x80, 0x12, 0xAD, 0xEC,
]

spawn_coordinates_extension = [
    # Checks if the 0x10 bit is set in the spawn ID and references the below list of custom spawn coordinates if it is.
    0x31, 0x6A, 0x00, 0x10,  # ANDI  T2, T3, 0x0010
    0x11, 0x40, 0x00, 0x03,  # BEQZ  T2, [forward 0x03]
    0x8C, 0xD9, 0x00, 0x08,  # LW    T9, 0x0008 (A2)
    0x3C, 0x19, 0x80, 0x40,  # LUI   T9, 0x8040
    0x27, 0x39, 0xC2, 0xCC,  # ADDIU T9, T9, 0xC2CC
    0x08, 0x05, 0x4A, 0x83,  # J 0x80152A0C
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x00, 0x00, 0x00, 0x00,  # NOP

    # Castle Wall end: 10
    #     player    camera    focus point
    # x = 0xFFFF    0xFFFF    0xFFFF
    # y = 0x0003    0x0012    0x000D
    # z = 0xFFF3    0xEDFF    0xFFF3
    # r = 0xC000
    0x00, 0x00,
    0xFF, 0xFF, 0x00, 0x03, 0xFF, 0xF3, 0xC0, 0x00,
    0xFF, 0xFF, 0x00, 0x12, 0xFF, 0xED,
    0xFF, 0xFF, 0x00, 0x0D, 0xFF, 0xF3,

    # Tunnel end: 11
    #     player    camera    focus point
    # x = 0x0088    0x0087    0x0088
    # y = 0x01D6    0x01F1    0x01E5
    # z = 0xF803    0xF7D2    0xF803
    # r = 0xC000
    0x00, 0x00,
    0x00, 0x88, 0x01, 0xD6, 0xF8, 0x03, 0xC0, 0x00,
    0x00, 0x87, 0x01, 0xF1, 0xF7, 0xD2,
    0x00, 0x88, 0x01, 0xE5, 0xF8, 0x03,

    # Tower of Execution end: 12
    #     player    camera    focus point
    # x = 0x00AC    0x00EC    0x00AC
    # y = 0x0154    0x0183    0x0160
    # z = 0xFE8F    0xFE8F    0xFE8F
    # r = 0x8000
    0x00, 0x00,
    0x00, 0xAC, 0x01, 0x54, 0xFE, 0x8F, 0x80, 0x00,
    0x00, 0xEC, 0x01, 0x83, 0xFE, 0x8F,
    0x00, 0xAC, 0x01, 0x60, 0xFE, 0x8F,

    # Tower of Sorcery end: 13
    #     player    camera    focus point
    # x = 0xFEB0    0xFE60    0xFEB0
    # y = 0x0348    0x036D    0x0358
    # z = 0xFEFB    0xFEFB    0xFEFB
    # r = 0x0000
    0x00, 0x00,
    0xFE, 0xB0, 0x03, 0x48, 0xFE, 0xFB, 0x00, 0x00,
    0xFE, 0x60, 0x03, 0x6D, 0xFE, 0xFB,
    0xFE, 0xB0, 0x03, 0x58, 0xFE, 0xFB,

    # Room of Clocks end: 14
    #     player    camera    focus point
    # x = 0x01B1    0x01BE    0x01B1
    # y = 0x0006    0x001B    0x0015
    # z = 0xFFCD    0xFFCD    0xFFCD
    # r = 0x8000
    0x00, 0x00,
    0x01, 0xB1, 0x00, 0x06, 0xFF, 0xCD, 0x80, 0x00,
    0x01, 0xBE, 0x00, 0x1B, 0xFF, 0xCD,
    0x01, 0xB1, 0x00, 0x15, 0xFF, 0xCD,

    # Duel Tower savepoint: 15
    #     player    camera    focus point
    # x = 0x00B9    0x00B9    0x00B9
    # y = 0x012B    0x0150    0x0138
    # z = 0xFE20    0xFE92    0xFE20
    # r = 0xC000
    0x00, 0x00,
    0x00, 0xB9, 0x01, 0x2B, 0xFE, 0x20, 0xC0, 0x00,
    0x00, 0xB9, 0x01, 0x50, 0xFE, 0x92,
    0x00, 0xB9, 0x01, 0x38, 0xFE, 0x20
]

waterway_end_coordinates = [
    # Underground Waterway end: 01
    #     player    camera    focus point
    # x = 0x0397    0x03A1    0x0397
    # y = 0xFFC4    0xFFDC    0xFFD3
    # z = 0xFDB9    0xFDB8    0xFDB9
    # r = 0x8000
    0x00, 0x00,
    0x03, 0x97, 0xFF, 0xC4, 0xFD, 0xB9, 0x80, 0x00,
    0x03, 0xA1, 0xFF, 0xDC, 0xFD, 0xB8,
    0x03, 0x97, 0xFF, 0xD3, 0xFD, 0xB9
]

continue_cursor_start_checker = [
    # This is used to improve the Game Over screen's "Continue" menu by starting the cursor on whichever checkpoint
    # is most recent instead of always on "Previously saved". If a menu has a cursor start value of 0xFF in its text
    # data, this will read the byte at 0x80389BC0 to determine which option to start the cursor on.
    0x82, 0x08, 0x00, 0x1C,  # LB    T0, 0x001C(S0)
    0x05, 0x01, 0x00, 0x03,  # BGEZ  T0,     [forward 0x03]
    0x3C, 0x09, 0x80, 0x39,  # LUI   T1, 0x8039
    0x81, 0x28, 0x9B, 0xC0,  # LB    T0, 0x9BC0 (T1)
    0xA2, 0x08, 0x00, 0x1C,  # SB    T0, 0x001C (S0)
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

savepoint_cursor_updater = [
    # Sets the value at 0x80389BC0 to 0x00 after saving to let the Game Over screen's "Continue" menu know to start the
    # cursor on "Previously saved". Then jump to deathlink_counter_decrementer in the event we're loading a save from
    # the Game Over screen.
    0x3C, 0x08, 0x80, 0x39,  # LUI    T0, 0x8039
    0xA1, 0x00, 0x9B, 0xC0,  # SB     R0, 0x9BC0 (T0)
    0x08, 0x0F, 0xF0, 0x52   # J   0x803FC148
]

stage_start_cursor_updater = [
    # Sets the value at 0x80389BC0 to 0x01 after entering a stage to let the Game Over screen's "Continue" menu know to
    # start the cursor on "Restart this stage".
    0x3C, 0x08, 0x80, 0x39,  # LUI    T0, 0x8039
    0x24, 0x09, 0x00, 0x01,  # ADDIU  T1, R0, 0x0001
    0xA1, 0x09, 0x9B, 0xC0,  # SB     T1, 0x9BC0 (T0)
    0x03, 0xE0, 0x00, 0x08   # JR     RA
]

elevator_flag_checker = [
    # Prevents the top elevator in Castle Center from activating if the bottom elevator switch is not turned on.
    0x3C, 0x08, 0x80, 0x39,  # LUI   T0, 0x8039
    0x91, 0x08, 0x9C, 0x07,  # LBU   T0, 0x9C07 (T0)
    0x31, 0x08, 0x00, 0x02,  # ANDI  T0, T0, 0x0002
    0x15, 0x00, 0x00, 0x02,  # BNEZ  T0,     [forward 0x02]
    0x84, 0x8E, 0x00, 0x4C,  # LH    T6, 0x004C (A0)
    0x24, 0x0E, 0x00, 0x00,  # ADDIU T6, R0, 0x0000
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

crystal_special2_giver = [
    # Gives a Special2 upon activating the big crystal in CC basement.
    0x3C, 0x09, 0x80, 0x39,  # LUI   T1, 0x8039
    0x24, 0x19, 0x00, 0x05,  # ADDIU T9, R0, 0x0005
    0xA1, 0x39, 0x9B, 0xDF,  # SB    T9, 0x9BDF (T1)
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x3C, 0x19, 0x80, 0x00   # LUI   T9, 0x8000
]

boss_save_stopper = [
    # Prevents usage of a White Jewel if in a boss fight. Important for the lizard-man trio in Waterway as escaping
    # their fight by saving/reloading can render a Special2 permanently missable.
    0x24, 0x08, 0x00, 0x01,  # ADDIU T0, R0, 0x0001
    0x15, 0x03, 0x00, 0x05,  # BNE   T0, V1, [forward 0x05]
    0x3C, 0x08, 0x80, 0x35,  # LUI   T0, 0x8035
    0x91, 0x08, 0xF7, 0xD8,  # LBU   T0, 0xF7D8 (T0)
    0x24, 0x09, 0x00, 0x20,  # ADDIU T1, R0, 0x0020
    0x51, 0x09, 0x00, 0x01,  # BEQL  T0, T1, [forward 0x01]
    0x24, 0x02, 0x00, 0x00,  # ADDIU V0, R0, 0x0000
    0x03, 0xE0, 0x00, 0x08   # JR    RA
]

music_modifier = [
    # Uses the ID of a song about to be played to pull a switcheroo by grabbing a new ID from a custom table to play
    # instead. A hacky way to circumvent song IDs in the compressed overlays' "play song" function calls, but it works!
    0xAF, 0xBF, 0x00, 0x1C,  # SW    RA, 0x001C (SP)
    0x0C, 0x00, 0x4A, 0x6B,  # JAL   0x800129AC
    0x44, 0x80, 0x00, 0x00,  # MTC1  R0, F0
    0x10, 0x40, 0x00, 0x03,  # BEQZ  V0, [forward 0x03]
    0x3C, 0x08, 0x80, 0x40,  # LUI   T0, 0x8040
    0x01, 0x04, 0x48, 0x21,  # ADDU  T1, T0, A0
    0x91, 0x24, 0xCD, 0x20,  # LBU   A0, 0xCD20 (T1)
    0x08, 0x00, 0x4E, 0x64   # J     0x80013990
]

music_comparer_modifier = [
    # The same as music_modifier, but for the function that compares the "song to play" ID with the one that's currently
    # playing. This will ensure the randomized music doesn't reset when going through a loading zone in Villa or CC.
    0x3C, 0x08, 0x80, 0x40,  # LUI   T0, 0x8040
    0x01, 0x04, 0x48, 0x21,  # ADDU  T1, T0, A0
    0x91, 0x24, 0xCD, 0x20,  # LBU   A0, 0xCD20 (T1)
    0x08, 0x00, 0x4A, 0x60,  # J     0x80012980
]

item_customizer = [
    # Allows changing an item's appearance settings and visibility independent of what it actually is as well as setting
    # its bitflag literally anywhere in the save file by changing things in the item actor's data as it's being created
    # for the below three functions to then utilize.
    0x03, 0x20, 0x58, 0x25,  # OR    T3, T9, R0
    0x00, 0x0B, 0x5A, 0x02,  # SRL   T3, T3, 8
    0xA0, 0xCB, 0x00, 0x40,  # SB    T3, 0x0040 (A2)
    0x33, 0x39, 0x00, 0xFF,  # ANDI  T9, T9, 0x00FF
    0xA4, 0xD9, 0x00, 0x38,  # SH    T9, 0x0038 (A2)
    0x8C, 0xCD, 0x00, 0x58,  # LW    T5, 0x0058 (A2)
    0x31, 0xAC, 0xFF, 0x00,  # ANDI  T4, T5, 0xFF00
    0x34, 0x0E, 0xFF, 0x00,  # ORI   T6, R0, 0xFF00
    0x15, 0x8E, 0x00, 0x0A,  # BNE   T4, T6, [forward 0x0A]
    0x31, 0xAC, 0x00, 0xFF,  # ANDI  T4, T5, 0x00FF
    0x24, 0x0E, 0x00, 0x02,  # ADDIU T6, R0, 0x0002
    0x01, 0x8E, 0x00, 0x1B,  # DIVU  T4, T6
    0x00, 0x00, 0x60, 0x10,  # MFHI  T4
    0x00, 0x0D, 0x5C, 0x02,  # SRL   T3, T5, 16
    0x51, 0x80, 0x00, 0x01,  # BEQZL T4, [forward 0x01]
    0x00, 0x0B, 0x5C, 0x00,  # SLL   T3, T3, 16
    0x00, 0x00, 0x60, 0x12,  # MFLO  T4
    0xA0, 0xCC, 0x00, 0x55,  # SB    T4, 0x0055 (A2)
    0xAC, 0xCB, 0x00, 0x58,  # SW    T3, 0x0058 (A2)
    0x08, 0x04, 0x94, 0xE5,  # J     0x80125394
    0x03, 0x2A, 0x00, 0x19   # MULTU T9, T2
]

item_appearance_switcher = [
    # Determines an item's model appearance by checking to see if a different item appearance ID was written in a
    # specific spot in the actor's data; if one wasn't (or it is C0 since that is for invisibility), then the appearance
    # value will be grabbed from the item's entry in the item property table like normal instead.
    0x92, 0x08, 0x00, 0x40,  # LBU   T0, 0x0040 (S0)
    0x24, 0x09, 0x00, 0xC0,  # ADDIU T1, R0, 0x00C0
    0x11, 0x09, 0x00, 0x03,  # BEQ   T0, T1, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x55, 0x00, 0x00, 0x01,  # BNEZL T0, T1, [forward 0x01]
    0x01, 0x00, 0x20, 0x25,  # OR    A0, T0, R0
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0xAF, 0xA7, 0x00, 0x24   # SW    A3, 0x0024 (SP)
]

item_model_visibility_switcher = [
    # If C0 is written in the appearance switch value in the item's actor data, parse 0C00 to the function that checks
    # if an item should be invisible or not. Otherwise, grab that setting from the item property table like normal.
    0x92, 0x0B, 0x00, 0x40,  # LBU   T3, 0x0040 (S0)
    0x24, 0x0E, 0x00, 0xC0,  # ADDIU T6, R0, 0x00C0
    0x15, 0x6E, 0x00, 0x03,  # BNE   T3, T6, [forward 0x03]
    0x24, 0x0D, 0x0C, 0x00,  # ADDIU T5, R0, 0x0C00
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x95, 0x8D, 0x00, 0x04   # LHU   T5, 0x0004 (T4)
]

item_shine_visibility_switcher = [
    # Same as the above, but for item shines instead of the model.
    0x92, 0x0B, 0x00, 0x40,  # LBU   T3, 0x0040 (S0)
    0x24, 0x09, 0x00, 0xC0,  # ADDIU T1, R0, 0x00C0
    0x15, 0x69, 0x00, 0x03,  # BNE   T3, T1, [forward 0x03]
    0x00, 0x00, 0x00, 0x00,  # NOP
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x24, 0x0C, 0x0C, 0x00,  # ADDIU T4, R0, 0x0C00
    0x03, 0xE0, 0x00, 0x08,  # JR    RA
    0x95, 0x8C, 0xA9, 0x08   # LHU   T4, 0xA908 (T4)
]
